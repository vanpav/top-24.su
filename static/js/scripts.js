fotoramaVersion="4.6.4",function(t,e,i,n,o){"use strict";function r(t){var e="bez_"+n.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof n.easing[e]){var i=function(t,e){var i=[null,null],n=[null,null],o=[null,null],r=function(r,a){return o[a]=3*t[a],n[a]=3*(e[a]-t[a])-o[a],i[a]=1-o[a]-n[a],r*(o[a]+r*(n[a]+r*i[a]))},a=function(t){return o[0]+t*(2*n[0]+3*i[0]*t)},s=function(t){for(var e,i=t,n=0;++n<14&&(e=r(i,0)-t,!(Math.abs(e)<.001));)i-=e/a(i);return i};return function(t){return r(s(t),1)}};n.easing[e]=function(e,n,o,r,a){return r*i([t[0],t[1]],[t[2],t[3]])(n/a)+o}}return e}function a(){}function s(t,e,i){return Math.max(isNaN(e)?-1/0:e,Math.min(isNaN(i)?1/0:i,t))}function l(t){return t.match(/ma/)&&t.match(/-?\d+(?!d)/g)[t.match(/3d/)?12:4]}function u(t){return Le?+l(t.css("transform")):+t.css("left").replace("px","")}function c(t){var e={};return Le?e.transform="translate3d("+t+"px,0,0)":e.left=t,e}function d(t){return{"transition-duration":t+"ms"}}function f(t,e){return isNaN(t)?e:t}function p(t,e){return f(+String(t).replace(e||"px",""))}function h(t){return/%$/.test(t)?p(t,"%"):o}function m(t,e){return f(h(t)/100*e,p(t))}function v(t){return(!isNaN(p(t))||!isNaN(p(t,"%")))&&t}function g(t,e,i,n){return(t-(n||0))*(e+(i||0))}function w(t,e,i,n){return-Math.round(t/(e+(i||0))-(n||0))}function y(t){var e=t.data();if(!e.tEnd){var i=t[0],n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"};B(i,n[be.prefixed("transition")],function(t){e.tProp&&t.propertyName.match(e.tProp)&&e.onEndFn()}),e.tEnd=!0}}function b(t,e,i,n){var o,r=t.data();r&&(r.onEndFn=function(){o||(o=!0,clearTimeout(r.tT),i())},r.tProp=e,clearTimeout(r.tT),r.tT=setTimeout(function(){r.onEndFn()},1.5*n),y(t))}function _(t,e){if(t.length){var i=t.data();Le?(t.css(d(0)),i.onEndFn=a,clearTimeout(i.tT)):t.stop();var n=x(e,function(){return u(t)});return t.css(c(n)),n}}function x(){for(var t,e=0,i=arguments.length;i>e&&(t=e?arguments[e]():arguments[e],"number"!=typeof t);e++);return t}function k(t,e){return Math.round(t+(e-t)/1.5)}function T(){return T.p=T.p||("https:"===i.protocol?"https://":"http://"),T.p}function C(t){var i=e.createElement("a");return i.href=t,i}function S(t,e){if("string"!=typeof t)return t;t=C(t);var i,n;if(t.host.match(/youtube\.com/)&&t.search){if(i=t.search.split("v=")[1]){var o=i.indexOf("&");-1!==o&&(i=i.substring(0,o)),n="youtube"}}else t.host.match(/youtube\.com|youtu\.be/)?(i=t.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),n="youtube"):t.host.match(/vimeo\.com/)&&(n="vimeo",i=t.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,""));return i&&n||!e||(i=t.href,n="custom"),i?{id:i,type:n,s:t.search.replace(/^\?/,""),p:T()}:!1}function I(t,e,i){var o,r,a=t.video;return"youtube"===a.type?(r=T()+"img.youtube.com/vi/"+a.id+"/default.jpg",o=r.replace(/\/default.jpg$/,"/hqdefault.jpg"),t.thumbsReady=!0):"vimeo"===a.type?n.ajax({url:T()+"vimeo.com/api/v2/video/"+a.id+".json",dataType:"jsonp",success:function(n){t.thumbsReady=!0,$(e,{img:n[0].thumbnail_large,thumb:n[0].thumbnail_small},t.i,i)}}):t.thumbsReady=!0,{img:o,thumb:r}}function $(t,e,i,o){for(var r=0,a=t.length;a>r;r++){var s=t[r];if(s.i===i&&s.thumbsReady){var l={videoReady:!0};l[Ke]=l[Ze]=l[Qe]=!1,o.splice(r,1,n.extend({},s,l,e));break}}}function P(t){function e(t,e,o){var r=t.children("img").eq(0),a=t.attr("href"),s=t.attr("src"),l=r.attr("src"),u=e.video,c=o?S(a,u===!0):!1;c?a=!1:c=u,i(t,r,n.extend(e,{video:c,img:e.img||a||s||l,thumb:e.thumb||l||s||a}))}function i(t,e,i){var o=i.thumb&&i.img!==i.thumb,r=p(i.width||t.attr("width")),a=p(i.height||t.attr("height"));n.extend(i,{width:r,height:a,thumbratio:V(i.thumbratio||p(i.thumbwidth||e&&e.attr("width")||o||r)/p(i.thumbheight||e&&e.attr("height")||o||a))})}var o=[];return t.children().each(function(){var t=n(this),r=H(n.extend(t.data(),{id:t.attr("id")}));if(t.is("a, img"))e(t,r,!0);else{if(t.is(":empty"))return;i(t,null,n.extend(r,{html:this,_html:t.html()}))}o.push(r)}),o}function M(t){return 0===t.offsetWidth&&0===t.offsetHeight}function E(t){return!n.contains(e.documentElement,t)}function A(t,e,i,n){return A.i||(A.i=1,A.ii=[!0]),n=n||A.i,"undefined"==typeof A.ii[n]&&(A.ii[n]=!0),t()?e():A.ii[n]&&setTimeout(function(){A.ii[n]&&A(t,e,i,n)},i||100),A.i++}function j(t){i.replace(i.protocol+"//"+i.host+i.pathname.replace(/^\/?/,"/")+i.search+"#"+t)}function L(t,e,i,n){var o=t.data(),r=o.measures;if(r&&(!o.l||o.l.W!==r.width||o.l.H!==r.height||o.l.r!==r.ratio||o.l.w!==e.w||o.l.h!==e.h||o.l.m!==i||o.l.p!==n)){var a=r.width,l=r.height,u=e.w/e.h,c=r.ratio>=u,d="scaledown"===i,f="contain"===i,p="cover"===i,h=G(n);c&&(d||f)||!c&&p?(a=s(e.w,0,d?a:1/0),l=a/r.ratio):(c&&p||!c&&(d||f))&&(l=s(e.h,0,d?l:1/0),a=l*r.ratio),t.css({width:a,height:l,left:m(h.x,e.w-a),top:m(h.y,e.h-l)}),o.l={W:r.width,H:r.height,r:r.ratio,w:e.w,h:e.h,m:i,p:n}}return!0}function N(t,e){var i=t[0];i.styleSheet?i.styleSheet.cssText=e:t.html(e)}function F(t,e,i){return e===i?!1:e>=t?"left":t>=i?"right":"left right"}function D(t,e,i,n){if(!i)return!1;if(!isNaN(t))return t-(n?0:1);for(var o,r=0,a=e.length;a>r;r++){var s=e[r];if(s.id===t){o=r;break}}return o}function W(t,e,i){i=i||{},t.each(function(){var t,o=n(this),r=o.data();r.clickOn||(r.clickOn=!0,n.extend(it(o,{onStart:function(e){t=e,(i.onStart||a).call(this,e)},onMove:i.onMove||a,onTouchEnd:i.onTouchEnd||a,onEnd:function(i){i.moved||e.call(this,t)}}),{noMove:!0}))})}function O(t,e){return'<div class="'+t+'">'+(e||"")+"</div>"}function q(t){for(var e=t.length;e;){var i=Math.floor(Math.random()*e--),n=t[e];t[e]=t[i],t[i]=n}return t}function z(t){return"[object Array]"==Object.prototype.toString.call(t)&&n.map(t,function(t){return n.extend({},t)})}function R(t,e,i){t.scrollLeft(e||0).scrollTop(i||0)}function H(t){if(t){var e={};return n.each(t,function(t,i){e[t.toLowerCase()]=i}),e}}function V(t){if(t){var e=+t;return isNaN(e)?(e=t.split("/"),+e[0]/+e[1]||o):e}}function B(t,e,i,n){e&&(t.addEventListener?t.addEventListener(e,i,!!n):t.attachEvent("on"+e,i))}function X(t){return!!t.getAttribute("disabled")}function U(t){return{tabindex:-1*t+"",disabled:t}}function Y(t,e){B(t,"keyup",function(i){X(t)||13==i.keyCode&&e.call(t,i)})}function K(t,e){B(t,"focus",t.onfocusin=function(i){e.call(t,i)},!0)}function Q(t,e){t.preventDefault?t.preventDefault():t.returnValue=!1,e&&t.stopPropagation&&t.stopPropagation()}function Z(t){return t?">":"<"}function G(t){return t=(t+"").split(/\s+/),{x:v(t[0])||ei,y:v(t[1])||ei}}function J(t,e){var i=t.data(),o=Math.round(e.pos),r=function(){i.sliding=!1,(e.onEnd||a)()};"undefined"!=typeof e.overPos&&e.overPos!==e.pos&&(o=e.overPos,r=function(){J(t,n.extend({},e,{overPos:e.pos,time:Math.max(Re,e.time/2)}))});var s=n.extend(c(o),e.width&&{width:e.width});i.sliding=!0,Le?(t.css(n.extend(d(e.time),s)),e.time>10?b(t,"transform",r,e.time):r()):t.stop().animate(s,e.time,Je,r)}function tt(t,e,i,o,r,s){var l="undefined"!=typeof s;if(l||(r.push(arguments),Array.prototype.push.call(arguments,r.length),!(r.length>1))){t=t||n(t),e=e||n(e);var u=t[0],c=e[0],d="crossfade"===o.method,f=function(){if(!f.done){f.done=!0;var t=(l||r.shift())&&r.shift();t&&tt.apply(this,t),(o.onEnd||a)(!!t)}},p=o.time/(s||1);i.removeClass(Ht+" "+Rt),t.stop().addClass(Ht),e.stop().addClass(Rt),d&&c&&t.fadeTo(0,0),t.fadeTo(d?p:0,1,d&&f),e.fadeTo(p,0,f),u&&d||c||f()}}function et(t){var e=(t.touches||[])[0]||t;t._x=e.pageX,t._y=e.clientY,t._now=n.now()}function it(t,i){function o(t){return f=n(t.target),b.checked=m=v=w=!1,c||b.flow||t.touches&&t.touches.length>1||t.which>1||oi&&oi.type!==t.type&&ai||(m=i.select&&f.is(i.select,y))?m:(h="touchstart"===t.type,v=f.is("a, a *",y),p=b.control,g=b.noMove||b.noSwipe||p?16:b.snap?0:4,et(t),d=oi=t,ri=t.type.replace(/down|start/,"move").replace(/Down/,"Move"),(i.onStart||a).call(y,t,{control:p,$target:f}),c=b.flow=!0,void((!h||b.go)&&Q(t)))}function r(t){if(t.touches&&t.touches.length>1||Oe&&!t.isPrimary||ri!==t.type||!c)return c&&s(),void(i.onTouchEnd||a)();et(t);var e=Math.abs(t._x-d._x),n=Math.abs(t._y-d._y),o=e-n,r=(b.go||b.x||o>=0)&&!b.noSwipe,l=0>o;h&&!b.checked?(c=r)&&Q(t):(Q(t),(i.onMove||a).call(y,t,{touch:h})),!w&&Math.sqrt(Math.pow(e,2)+Math.pow(n,2))>g&&(w=!0),b.checked=b.checked||r||l}function s(t){(i.onTouchEnd||a)();var e=c;b.control=c=!1,e&&(b.flow=!1),!e||v&&!b.checked||(t&&Q(t),ai=!0,clearTimeout(si),si=setTimeout(function(){ai=!1},1e3),(i.onEnd||a).call(y,{moved:w,$target:f,control:p,touch:h,startEvent:d,aborted:!t||"MSPointerCancel"===t.type}))}function l(){b.flow||setTimeout(function(){b.flow=!0},10)}function u(){b.flow&&setTimeout(function(){b.flow=!1},ze)}var c,d,f,p,h,m,v,g,w,y=t[0],b={};return Oe?(B(y,"MSPointerDown",o),B(e,"MSPointerMove",r),B(e,"MSPointerCancel",s),B(e,"MSPointerUp",s)):(B(y,"touchstart",o),B(y,"touchmove",r),B(y,"touchend",s),B(e,"touchstart",l),B(e,"touchend",u),B(e,"touchcancel",u),Me.on("scroll",u),t.on("mousedown",o),Ee.on("mousemove",r).on("mouseup",s)),t.on("click","a",function(t){b.checked&&Q(t)}),b}function nt(t,e){function i(i,n){S=!0,u=d=i._x,v=i._now,m=[[v,u]],f=p=P.noMove||n?0:_(t,(e.getPos||a)()),(e.onStart||a).call(I,i)}function o(t,e){w=P.min,y=P.max,b=P.snap,x=t.altKey,S=C=!1,T=e.control,T||$.sliding||i(t)}function r(n,o){P.noSwipe||(S||i(n),d=n._x,m.push([n._now,d]),p=f-(u-d),h=F(p,w,y),w>=p?p=k(p,w):p>=y&&(p=k(p,y)),P.noMove||(t.css(c(p)),C||(C=!0,o.touch||Oe||t.addClass(oe)),(e.onMove||a).call(I,n,{pos:p,edge:h})))}function l(o){if(!P.noSwipe||!o.moved){S||i(o.startEvent,!0),o.touch||Oe||t.removeClass(oe),g=n.now();for(var r,l,u,c,h,v,_,k,T,C=g-ze,$=null,M=Re,E=e.friction,A=m.length-1;A>=0;A--){if(r=m[A][0],l=Math.abs(r-C),null===$||u>l)$=r,c=m[A][1];else if($===C||l>u)break;u=l}_=s(p,w,y);var j=c-d,L=j>=0,N=g-$,F=N>ze,D=!F&&p!==f&&_===p;b&&(_=s(Math[D?L?"floor":"ceil":"round"](p/b)*b,w,y),w=y=_),D&&(b||_===p)&&(T=-(j/N),M*=s(Math.abs(T),e.timeLow,e.timeHigh),h=Math.round(p+T*M/E),b||(_=h),(!L&&h>y||L&&w>h)&&(v=L?w:y,k=h-v,b||(_=v),k=s(_+.03*k,v-50,v+50),M=Math.abs((p-k)/(T/E)))),M*=x?10:1,(e.onEnd||a).call(I,n.extend(o,{moved:o.moved||F&&b,pos:p,newPos:_,overPos:k,time:M}))}}var u,d,f,p,h,m,v,g,w,y,b,x,T,C,S,I=t[0],$=t.data(),P={};return P=n.extend(it(e.$wrap,n.extend({},e,{onStart:o,onMove:r,onEnd:l})),P)}function ot(t,e){var i,o,r,s=t[0],l={prevent:{}};return B(s,qe,function(t){var s=t.wheelDeltaY||-1*t.deltaY||0,u=t.wheelDeltaX||-1*t.deltaX||0,c=Math.abs(u)&&!Math.abs(s),d=Z(0>u),f=o===d,p=n.now(),h=ze>p-r;o=d,r=p,c&&l.ok&&(!l.prevent[d]||i)&&(Q(t,!0),i&&f&&h||(e.shift&&(i=!0,clearTimeout(l.t),l.t=setTimeout(function(){i=!1},He)),(e.onEnd||a)(t,e.shift?d:u)))}),l}function rt(){n.each(n.Fotorama.instances,function(t,e){e.index=t})}function at(t){n.Fotorama.instances.push(t),rt()}function st(t){n.Fotorama.instances.splice(t.index,1),rt()}var lt="fotorama",ut="fullscreen",ct=lt+"__wrap",dt=ct+"--css2",ft=ct+"--css3",pt=ct+"--video",ht=ct+"--fade",mt=ct+"--slide",vt=ct+"--no-controls",gt=ct+"--no-shadows",wt=ct+"--pan-y",yt=ct+"--rtl",bt=ct+"--only-active",_t=ct+"--no-captions",xt=ct+"--toggle-arrows",kt=lt+"__stage",Tt=kt+"__frame",Ct=Tt+"--video",St=kt+"__shaft",It=lt+"__grab",$t=lt+"__pointer",Pt=lt+"__arr",Mt=Pt+"--disabled",Et=Pt+"--prev",At=Pt+"--next",jt=lt+"__nav",Lt=jt+"-wrap",Nt=jt+"__shaft",Ft=jt+"--dots",Dt=jt+"--thumbs",Wt=jt+"__frame",Ot=Wt+"--dot",qt=Wt+"--thumb",zt=lt+"__fade",Rt=zt+"-front",Ht=zt+"-rear",Vt=lt+"__shadow",Bt=Vt+"s",Xt=Bt+"--left",Ut=Bt+"--right",Yt=lt+"__active",Kt=lt+"__select",Qt=lt+"--hidden",Zt=lt+"--fullscreen",Gt=lt+"__fullscreen-icon",Jt=lt+"__error",te=lt+"__loading",ee=lt+"__loaded",ie=ee+"--full",ne=ee+"--img",oe=lt+"__grabbing",re=lt+"__img",ae=re+"--full",se=lt+"__dot",le=lt+"__thumb",ue=le+"-border",ce=lt+"__html",de=lt+"__video",fe=de+"-play",pe=de+"-close",he=lt+"__caption",me=lt+"__caption__wrap",ve=lt+"__spinner",ge='" tabindex="0" role="button',we=n&&n.fn.jquery.split(".");if(!we||we[0]<1||1==we[0]&&we[1]<8)throw"Fotorama requires jQuery 1.8 or later and will not run without it.";var ye={},be=function(t,e,i){function n(t){g.cssText=t}function o(t,e){return typeof t===e}function r(t,e){return!!~(""+t).indexOf(e)}function a(t,e){for(var n in t){var o=t[n];if(!r(o,"-")&&g[o]!==i)return"pfx"==e?o:!0}return!1}function s(t,e,n){for(var r in t){var a=e[t[r]];if(a!==i)return n===!1?t[r]:o(a,"function")?a.bind(n||e):a}return!1}function l(t,e,i){var n=t.charAt(0).toUpperCase()+t.slice(1),r=(t+" "+b.join(n+" ")+n).split(" ");return o(e,"string")||o(e,"undefined")?a(r,e):(r=(t+" "+_.join(n+" ")+n).split(" "),s(r,e,i))}var u,c,d,f="2.6.2",p={},h=e.documentElement,m="modernizr",v=e.createElement(m),g=v.style,w=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),y="Webkit Moz O ms",b=y.split(" "),_=y.toLowerCase().split(" "),x={},k=[],T=k.slice,C=function(t,i,n,o){var r,a,s,l,u=e.createElement("div"),c=e.body,d=c||e.createElement("body");if(parseInt(n,10))for(;n--;)s=e.createElement("div"),s.id=o?o[n]:m+(n+1),u.appendChild(s);return r=["&#173;",'<style id="s',m,'">',t,"</style>"].join(""),u.id=m,(c?u:d).innerHTML+=r,d.appendChild(u),c||(d.style.background="",d.style.overflow="hidden",l=h.style.overflow,h.style.overflow="hidden",h.appendChild(d)),a=i(u,t),c?u.parentNode.removeChild(u):(d.parentNode.removeChild(d),h.style.overflow=l),!!a},S={}.hasOwnProperty;d=o(S,"undefined")||o(S.call,"undefined")?function(t,e){return e in t&&o(t.constructor.prototype[e],"undefined")}:function(t,e){return S.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var i=T.call(arguments,1),n=function(){if(this instanceof n){var o=function(){};o.prototype=e.prototype;var r=new o,a=e.apply(r,i.concat(T.call(arguments)));return Object(a)===a?a:r}return e.apply(t,i.concat(T.call(arguments)))};return n}),x.csstransforms3d=function(){var t=!!l("perspective");return t};for(var I in x)d(x,I)&&(c=I.toLowerCase(),p[c]=x[I](),k.push((p[c]?"":"no-")+c));return p.addTest=function(t,e){if("object"==typeof t)for(var n in t)d(t,n)&&p.addTest(n,t[n]);else{if(t=t.toLowerCase(),p[t]!==i)return p;e="function"==typeof e?e():e,"undefined"!=typeof enableClasses&&enableClasses&&(h.className+=" "+(e?"":"no-")+t),p[t]=e}return p},n(""),v=u=null,p._version=f,p._prefixes=w,p._domPrefixes=_,p._cssomPrefixes=b,p.testProp=function(t){return a([t])},p.testAllProps=l,p.testStyles=C,p.prefixed=function(t,e,i){return e?l(t,e,i):l(t,"pfx")},p}(t,e),_e={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},xe="webkit moz o ms khtml".split(" ");if("undefined"!=typeof e.cancelFullScreen)_e.ok=!0;else for(var ke=0,Te=xe.length;Te>ke;ke++)if(_e.prefix=xe[ke],"undefined"!=typeof e[_e.prefix+"CancelFullScreen"]){_e.ok=!0;break}_e.ok&&(_e.event=_e.prefix+"fullscreenchange",_e.is=function(){switch(this.prefix){case"":return e.fullScreen;case"webkit":return e.webkitIsFullScreen;default:return e[this.prefix+"FullScreen"]}},_e.request=function(t){return""===this.prefix?t.requestFullScreen():t[this.prefix+"RequestFullScreen"]()},_e.cancel=function(){return""===this.prefix?e.cancelFullScreen():e[this.prefix+"CancelFullScreen"]()});var Ce,Se={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:"rgba(128, 128, 128, .75)",hwaccel:!0},Ie={top:"auto",left:"auto",className:""};!function(t,e){Ce=e()}(this,function(){function t(t,i){var n,o=e.createElement(t||"div");for(n in i)o[n]=i[n];return o}function i(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,i,n){var o=["opacity",e,~~(100*t),i,n].join("-"),r=.01+i/n*100,a=Math.max(1-(1-t)/e*(100-r),t),s=f.substring(0,f.indexOf("Animation")).toLowerCase(),l=s&&"-"+s+"-"||"";return h[o]||(m.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+a+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}100%{opacity:"+a+"}}",m.cssRules.length),h[o]=1),o}function r(t,e){var i,n,r=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<p.length;n++)if(i=p[n]+e,r[i]!==o)return i;return r[e]!==o?e:void 0}function a(t,e){for(var i in e)t.style[r(t,i)||i]=e[i];return t}function s(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]===o&&(t[n]=i[n])}return t}function l(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function u(t,e){return"string"==typeof t?t:t[e%t.length]}function c(t){return"undefined"==typeof this?new c(t):void(this.opts=s(t||{},c.defaults,v))}function d(){function e(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}m.addRule(".spin-vml","behavior:url(#default#VML)"),c.prototype.lines=function(t,n){function o(){return a(e("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function r(t,r,s){i(f,i(a(o(),{rotation:360/n.lines*t+"deg",left:~~r}),i(a(e("roundrect",{arcsize:n.corners}),{width:l,height:n.width,left:n.radius,top:-n.width>>1,filter:s}),e("fill",{color:u(n.color,t),opacity:n.opacity}),e("stroke",{opacity:0}))))}var s,l=n.length+n.width,c=2*l,d=2*-(n.width+n.length)+"px",f=a(o(),{position:"absolute",top:d,left:d});if(n.shadow)for(s=1;s<=n.lines;s++)r(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=n.lines;s++)r(s);return i(t,f)},c.prototype.opacity=function(t,e,i,n){var o=t.firstChild;n=n.shadow&&n.lines||0,o&&e+n<o.childNodes.length&&(o=o.childNodes[e+n],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=i))}}var f,p=["webkit","Moz","ms","O"],h={},m=function(){var n=t("style",{type:"text/css"});return i(e.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),v={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};c.defaults={},s(c.prototype,{spin:function(e){this.stop();var i,n,o=this,r=o.opts,s=o.el=a(t(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex}),u=r.radius+r.length+r.width;if(e&&(e.insertBefore(s,e.firstChild||null),n=l(e),i=l(s),a(s,{left:("auto"==r.left?n.x-i.x+(e.offsetWidth>>1):parseInt(r.left,10)+u)+"px",top:("auto"==r.top?n.y-i.y+(e.offsetHeight>>1):parseInt(r.top,10)+u)+"px"})),s.setAttribute("role","progressbar"),o.lines(s,o.opts),!f){var c,d=0,p=(r.lines-1)*(1-r.direction)/2,h=r.fps,m=h/r.speed,v=(1-r.opacity)/(m*r.trail/100),g=m/r.lines;!function w(){d++;for(var t=0;t<r.lines;t++)c=Math.max(1-(d+(r.lines-t)*g)%m*v,r.opacity),o.opacity(s,t*r.direction+p,c,r);o.timeout=o.el&&setTimeout(w,~~(1e3/h))}()}return o},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=o),this},lines:function(e,o){function r(e,i){return a(t(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*l+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var s,l=0,c=(o.lines-1)*(1-o.direction)/2;l<o.lines;l++)s=a(t(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:f&&n(o.opacity,o.trail,c+l*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&i(s,a(r("#000","0 0 4px #000"),{top:"2px"})),i(e,i(s,r(u(o.color,l),"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var g=a(t("group"),{behavior:"url(#default#VML)"});return!r(g,"transform")&&g.adj?d():f=r(g,"animation"),c});var $e,Pe,Me=n(t),Ee=n(e),Ae="quirks"===i.hash.replace("#",""),je=be.csstransforms3d,Le=je&&!Ae,Ne=je||"CSS1Compat"===e.compatMode,Fe=_e.ok,De=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),We=!Le||De,Oe=navigator.msPointerEnabled,qe="onwheel"in e.createElement("div")?"wheel":e.onmousewheel!==o?"mousewheel":"DOMMouseScroll",ze=250,Re=300,He=1400,Ve=5e3,Be=2,Xe=64,Ue=500,Ye=333,Ke="$stageFrame",Qe="$navDotFrame",Ze="$navThumbFrame",Ge="auto",Je=r([.1,0,.25,1]),ti=99999,ei="50%",ii={width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:Be,glimpse:0,fit:"contain",position:ei,thumbposition:ei,nav:"dots",navposition:"bottom",navwidth:null,thumbwidth:Xe,thumbheight:Xe,thumbmargin:Be,thumbborderwidth:Be,thumbfit:"cover",allowfullscreen:!1,transition:"slide",clicktransition:null,transitionduration:Re,captions:!0,hash:!1,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!0,click:!0,swipe:!0,trackpad:!1,enableifsingleframe:!1,controlsonstart:!0,shuffle:!1,direction:"ltr",shadows:!0,spinner:null},ni={left:!0,right:!0,down:!1,up:!1,space:!1,home:!1,end:!1};A.stop=function(t){A.ii[t]=!1};var oi,ri,ai,si;jQuery.Fotorama=function(t,o){function r(){n.each(Ti,function(t,e){if(!e.i){e.i=pn++;var i=S(e.video,!0);if(i){var n={};e.video=i,e.img||e.thumb?e.thumbsReady=!0:n=I(e,Ti,un),$(Ti,{img:n.img,thumb:n.thumb},e.i,un)}}})}function a(t){return Zi[t]||un.fullScreen}function l(t){var e="keydown."+lt,i=lt+cn,n="keydown."+i,r="resize."+i+" orientationchange."+i;t?(Ee.on(n,function(t){var e,i;$i&&27===t.keyCode?(e=!0,fi($i,!0,!0)):(un.fullScreen||o.keyboard&&!un.index)&&(27===t.keyCode?(e=!0,un.cancelFullScreen()):t.shiftKey&&32===t.keyCode&&a("space")||37===t.keyCode&&a("left")||38===t.keyCode&&a("up")?i="<":32===t.keyCode&&a("space")||39===t.keyCode&&a("right")||40===t.keyCode&&a("down")?i=">":36===t.keyCode&&a("home")?i="<<":35===t.keyCode&&a("end")&&(i=">>")),(e||i)&&Q(t),i&&un.show({index:i,slow:t.altKey,user:!0})}),un.index||Ee.off(e).on(e,"textarea, input, select",function(t){!Pe.hasClass(ut)&&t.stopPropagation()}),Me.on(r,un.resize)):(Ee.off(n),Me.off(r))}function u(e){e!==u.f&&(e?(t.html("").addClass(lt+" "+dn).append(gn).before(mn).before(vn),at(un)):(gn.detach(),mn.detach(),vn.detach(),t.html(hn.urtext).removeClass(dn),st(un)),l(e),u.f=e)}function f(){Ti=un.data=Ti||z(o.data)||P(t),Ci=un.size=Ti.length,!ki.ok&&o.shuffle&&q(Ti),r(),Fn=T(Fn),Ci&&u(!0)}function h(){var t=2>Ci&&!o.enableifsingleframe||$i;On.noMove=t||Vi,On.noSwipe=t||!o.swipe,!Yi&&yn.toggleClass(It,!o.click&&!On.noMove&&!On.noSwipe),Oe&&gn.toggleClass(wt,!On.noSwipe)}function y(t){t===!0&&(t=""),o.autoplay=Math.max(+t||Ve,1.5*Ui)}function b(){function t(t,i){e[t?"add":"remove"].push(i)}un.options=o=H(o),Vi="crossfade"===o.transition||"dissolve"===o.transition,Wi=o.loop&&(Ci>2||Vi&&(!Yi||"slide"!==Yi)),Ui=+o.transitionduration||Re,Qi="rtl"===o.direction,Zi=n.extend({},o.keyboard&&ni,o.keyboard);var e={add:[],remove:[]};Ci>1||o.enableifsingleframe?(Oi=o.nav,zi="top"===o.navposition,e.remove.push(Kt),kn.toggle(!!o.arrows)):(Oi=!1,kn.hide()),Ht(),Ii=new Ce(n.extend(Se,o.spinner,Ie,{direction:Qi?-1:1})),Ae(),je(),o.autoplay&&y(o.autoplay),Bi=p(o.thumbwidth)||Xe,Xi=p(o.thumbheight)||Xe,qn.ok=Rn.ok=o.trackpad&&!We,h(),oi(o,[Wn]),qi="thumbs"===Oi,qi?(de(Ci,"navThumb"),Si=$n,ln=Ze,N(mn,n.Fotorama.jst.style({w:Bi,h:Xi,b:o.thumbborderwidth,m:o.thumbmargin,s:cn,q:!Ne})),Cn.addClass(Dt).removeClass(Ft)):"dots"===Oi?(de(Ci,"navDot"),Si=In,ln=Qe,Cn.addClass(Ft).removeClass(Dt)):(Oi=!1,Cn.removeClass(Dt+" "+Ft)),Oi&&(zi?Tn.insertBefore(wn):Tn.insertAfter(wn),xe.nav=!1,xe(Si,Sn,"nav")),Ri=o.allowfullscreen,Ri?(Mn.prependTo(wn),Hi=Fe&&"native"===Ri):(Mn.detach(),Hi=!1),t(Vi,ht),t(!Vi,mt),t(!o.captions,_t),t(Qi,yt),t("always"!==o.arrows,xt),Ki=o.shadows&&!We,t(!Ki,gt),gn.addClass(e.add.join(" ")).removeClass(e.remove.join(" ")),Dn=n.extend({},o)}function k(t){return 0>t?(Ci+t%Ci)%Ci:t>=Ci?t%Ci:t}function T(t){return s(t,0,Ci-1)}function C(t){return Wi?k(t):T(t)}function M(t){return t>0||Wi?t-1:!1}function X(t){return Ci-1>t||Wi?t+1:!1}function G(){On.min=Wi?-1/0:-g(Ci-1,Wn.w,o.margin,Ei),On.max=Wi?1/0:-g(0,Wn.w,o.margin,Ei),On.snap=Wn.w+o.margin}function et(){zn.min=Math.min(0,Wn.nw-Sn.width()),zn.max=0,Sn.toggleClass(It,!(zn.noMove=zn.min===zn.max))}function it(t,e,i){if("number"==typeof t){t=new Array(t);var o=!0}return n.each(t,function(t,n){if(o&&(n=t),"number"==typeof n){var r=Ti[k(n)];if(r){var a="$"+e+"Frame",s=r[a];i.call(this,t,n,r,s,a,s&&s.data())}}})}function rt(t,e,i,n){(!Gi||"*"===Gi&&n===Di)&&(t=v(o.width)||v(t)||Ue,e=v(o.height)||v(e)||Ye,un.resize({width:t,ratio:o.ratio||i||t/e},0,n!==Di&&"*"))}function zt(t,e,i,r,a,s){it(t,e,function(t,l,u,c,d,f){function p(t){var e=k(l);ri(t,{index:e,src:x,frame:Ti[e]})}function h(){y.remove(),n.Fotorama.cache[x]="error",u.html&&"stage"===e||!T||T===x?(!x||u.html||g?"stage"===e&&(c.trigger("f:load").removeClass(te+" "+Jt).addClass(ee),p("load"),rt()):(c.trigger("f:error").removeClass(te).addClass(Jt),p("error")),f.state="error",!(Ci>1&&Ti[l]===u)||u.html||u.deleted||u.video||g||(u.deleted=!0,un.splice(l,1))):(u[_]=x=T,zt([l],e,i,r,a,!0))}function m(){n.Fotorama.measures[x]=b.measures=n.Fotorama.measures[x]||{width:w.width,height:w.height,ratio:w.width/w.height},rt(b.measures.width,b.measures.height,b.measures.ratio,l),y.off("load error").addClass(re+(g?" "+ae:"")).prependTo(c),L(y,(n.isFunction(i)?i():i)||Wn,r||u.fit||o.fit,a||u.position||o.position),n.Fotorama.cache[x]=f.state="loaded",setTimeout(function(){c.trigger("f:load").removeClass(te+" "+Jt).addClass(ee+" "+(g?ie:ne)),"stage"===e?p("load"):(u.thumbratio===Ge||!u.thumbratio&&o.thumbratio===Ge)&&(u.thumbratio=b.measures.ratio,_i())},0)}function v(){var t=10;A(function(){return!an||!t--&&!We},function(){m()})}if(c){var g=un.fullScreen&&u.full&&u.full!==u.img&&!f.$full&&"stage"===e;if(!f.$img||s||g){var w=new Image,y=n(w),b=y.data();f[g?"$full":"$img"]=y;var _="stage"===e?g?"full":"img":"thumb",x=u[_],T=g?null:u["stage"===e?"thumb":"img"];if("navThumb"===e&&(c=f.$wrap),!x)return void h();n.Fotorama.cache[x]?!function C(){"error"===n.Fotorama.cache[x]?h():"loaded"===n.Fotorama.cache[x]?setTimeout(v,0):setTimeout(C,100)}():(n.Fotorama.cache[x]="*",y.on("load",v).on("error",h)),f.state="",w.src=x}}})}function Rt(t){Nn.append(Ii.spin().el).appendTo(t)}function Ht(){Nn.detach(),Ii&&Ii.stop()}function Vt(){var t=Pi[Ke];t&&!t.data().state&&(Rt(t),t.on("f:load f:error",function(){t.off("f:load f:error"),Ht()}))}function oe(t){Y(t,wi),K(t,function(){setTimeout(function(){R(Cn)},0),He({time:Ui,guessIndex:n(this).data().eq,minMax:zn})})}function de(t,e){it(t,e,function(t,i,o,r,a,s){if(!r){r=o[a]=gn[a].clone(),s=r.data(),s.data=o;var l=r[0];"stage"===e?(o.html&&n('<div class="'+ce+'"></div>').append(o._html?n(o.html).removeAttr("id").html(o._html):o.html).appendTo(r),o.caption&&n(O(he,O(me,o.caption))).appendTo(r),o.video&&r.addClass(Ct).append(An.clone()),K(l,function(){setTimeout(function(){R(wn)},0),mi({index:s.eq,user:!0})}),bn=bn.add(r)):"navDot"===e?(oe(l),In=In.add(r)):"navThumb"===e&&(oe(l),s.$wrap=r.children(":first"),$n=$n.add(r),o.video&&s.$wrap.append(An.clone()))}})}function we(t,e,i,n){return t&&t.length&&L(t,e,i,n)}function ye(t){it(t,"stage",function(t,e,i,r,a,s){if(r){var l=k(e),u=i.fit||o.fit,c=i.position||o.position;s.eq=l,Vn[Ke][l]=r.css(n.extend({left:Vi?0:g(e,Wn.w,o.margin,Ei)},Vi&&d(0))),E(r[0])&&(r.appendTo(yn),fi(i.$video)),we(s.$img,Wn,u,c),we(s.$full,Wn,u,c)}})}function be(t,e){if("thumbs"===Oi&&!isNaN(t)){var i=-t,r=-t+Wn.nw;$n.each(function(){var t=n(this),a=t.data(),s=a.eq,l=function(){return{h:Xi,w:a.w}},u=l(),c=Ti[s]||{},d=c.thumbfit||o.thumbfit,f=c.thumbposition||o.thumbposition;u.w=a.w,a.l+a.w<i||a.l>r||we(a.$img,u,d,f)||e&&zt([s],"navThumb",l,d,f)})}}function xe(t,e,i){if(!xe[i]){var r="nav"===i&&qi,a=0;e.append(t.filter(function(){for(var t,e=n(this),i=e.data(),o=0,r=Ti.length;r>o;o++)if(i.data===Ti[o]){t=!0,i.eq=o;break}return t||e.remove()&&!1}).sort(function(t,e){return n(t).data().eq-n(e).data().eq}).each(function(){if(r){var t=n(this),e=t.data(),i=Math.round(Xi*e.data.thumbratio)||Bi;e.l=a,e.w=i,t.css({width:i}),a+=i+o.thumbmargin}})),xe[i]=!0}}function ke(t){return t-Bn>Wn.w/3}function Te(t){return!(Wi||Fn+t&&Fn-Ci+t||$i)}function Ae(){var t=Te(0),e=Te(1);_n.toggleClass(Mt,t).attr(U(t)),xn.toggleClass(Mt,e).attr(U(e))}function je(){qn.ok&&(qn.prevent={"<":Te(0),">":Te(1)})}function De(t){var e,i,n=t.data();return qi?(e=n.l,i=n.w):(e=t.position().left,i=t.width()),{c:e+i/2,min:-e+10*o.thumbmargin,max:-e+Wn.w-i-10*o.thumbmargin}}function qe(t){var e=Pi[ln].data();J(Pn,{time:1.2*t,pos:e.l,width:e.w-2*o.thumbborderwidth})}function He(t){var e=Ti[t.guessIndex][ln];if(e){var i=zn.min!==zn.max,n=t.minMax||i&&De(Pi[ln]),o=i&&(t.keep&&He.l?He.l:s((t.coo||Wn.nw/2)-De(e).c,n.min,n.max)),r=i&&s(o,zn.min,zn.max),a=1.1*t.time;J(Sn,{time:a,pos:r||0,onEnd:function(){be(r,!0)}}),di(Cn,F(r,zn.min,zn.max)),He.l=o}}function Be(){Je(ln),Hn[ln].push(Pi[ln].addClass(Yt))}function Je(t){for(var e=Hn[t];e.length;)e.shift().removeClass(Yt)}function ei(t){var e=Vn[t];n.each(Mi,function(t,i){delete e[k(i)]}),n.each(e,function(t,i){delete e[t],i.detach()})}function ii(t){Ei=Ai=Fn;var e=Pi[Ke];e&&(Je(Ke),Hn[Ke].push(e.addClass(Yt)),t||un.show.onEnd(!0),_(yn,0,!0),ei(Ke),ye(Mi),G(),et())}function oi(t,e){t&&n.each(e,function(e,i){i&&n.extend(i,{width:t.width||i.width,height:t.height,minwidth:t.minwidth,maxwidth:t.maxwidth,minheight:t.minheight,maxheight:t.maxheight,ratio:V(t.ratio)})})}function ri(e,i){t.trigger(lt+":"+e,[un,i])}function ai(){clearTimeout(si.t),an=1,o.stopautoplayontouch?un.stopAutoplay():nn=!0}function si(){an&&(o.stopautoplayontouch||(li(),ui()),si.t=setTimeout(function(){an=0},Re+ze))}function li(){nn=!(!$i&&!on)}function ui(){if(clearTimeout(ui.t),A.stop(ui.w),!o.autoplay||nn)return void(un.autoplay&&(un.autoplay=!1,ri("stopautoplay")));un.autoplay||(un.autoplay=!0,ri("startautoplay"));var t=Fn,e=Pi[Ke].data();ui.w=A(function(){return e.state||t!==Fn},function(){ui.t=setTimeout(function(){if(!nn&&t===Fn){var e=Fi,i=Ti[e][Ke].data();ui.w=A(function(){return i.state||e!==Fi},function(){nn||e!==Fi||un.show(Wi?Z(!Qi):Fi)})}},o.autoplay)})}function ci(){un.fullScreen&&(un.fullScreen=!1,Fe&&_e.cancel(fn),Pe.removeClass(ut),$e.removeClass(ut),t.removeClass(Zt).insertAfter(vn),Wn=n.extend({},rn),fi($i,!0,!0),gi("x",!1),un.resize(),zt(Mi,"stage"),R(Me,tn,Ji),ri("fullscreenexit"))}function di(t,e){Ki&&(t.removeClass(Xt+" "+Ut),e&&!$i&&t.addClass(e.replace(/^|\s/g," "+Bt+"--")))}function fi(t,e,i){e&&(gn.removeClass(pt),$i=!1,h()),t&&t!==$i&&(t.remove(),ri("unloadvideo")),i&&(li(),ui())}function pi(t){gn.toggleClass(vt,t)}function hi(t){if(!On.flow){var e=t?t.pageX:hi.x,i=e&&!Te(ke(e))&&o.click;hi.p!==i&&wn.toggleClass($t,i)&&(hi.p=i,hi.x=e)}}function mi(t){clearTimeout(mi.t),o.clicktransition&&o.clicktransition!==o.transition?setTimeout(function(){var e=o.transition;un.setOptions({transition:o.clicktransition}),Yi=e,mi.t=setTimeout(function(){un.show(t)},10)},0):un.show(t)}function vi(t,e){var i=t.target,r=n(i);r.hasClass(fe)?un.playVideo():i===En?un.toggleFullScreen():$i?i===Ln&&fi($i,!0,!0):e?pi():o.click&&mi({index:t.shiftKey||Z(ke(t._x)),slow:t.altKey,user:!0})}function gi(t,e){On[t]=zn[t]=e}function wi(t){var e=n(this).data().eq;mi({index:e,slow:t.altKey,user:!0,coo:t._x-Cn.offset().left})}function yi(t){mi({index:kn.index(this)?">":"<",slow:t.altKey,user:!0})}function bi(t){K(t,function(){setTimeout(function(){R(wn)},0),pi(!1)})}function _i(){if(f(),b(),!_i.i){_i.i=!0;var t=o.startindex;(t||o.hash&&i.hash)&&(Di=D(t||i.hash.replace(/^#/,""),Ti,0===un.index||t,t)),Fn=Ei=Ai=ji=Di=C(Di)||0}if(Ci){if(xi())return;$i&&fi($i,!0),Mi=[],ei(Ke),_i.ok=!0,un.show({index:Fn,time:0}),un.resize()}else un.destroy()}function xi(){return!xi.f===Qi?(xi.f=Qi,Fn=Ci-1-Fn,un.reverse(),!0):void 0}function ki(){ki.ok||(ki.ok=!0,ri("ready"))}$e=n("html"),Pe=n("body");var Ti,Ci,Si,Ii,$i,Pi,Mi,Ei,Ai,ji,Li,Ni,Fi,Di,Wi,Oi,qi,zi,Ri,Hi,Vi,Bi,Xi,Ui,Yi,Ki,Qi,Zi,Gi,Ji,tn,en,nn,on,rn,an,sn,ln,un=this,cn=n.now(),dn=lt+cn,fn=t[0],pn=1,hn=t.data(),mn=n("<style></style>"),vn=n(O(Qt)),gn=n(O(ct)),wn=n(O(kt)).appendTo(gn),yn=(wn[0],n(O(St)).appendTo(wn)),bn=n(),_n=n(O(Pt+" "+Et+ge)),xn=n(O(Pt+" "+At+ge)),kn=_n.add(xn).appendTo(wn),Tn=n(O(Lt)),Cn=n(O(jt)).appendTo(Tn),Sn=n(O(Nt)).appendTo(Cn),In=n(),$n=n(),Pn=(yn.data(),
Sn.data(),n(O(ue)).appendTo(Sn)),Mn=n(O(Gt+ge)),En=Mn[0],An=n(O(fe)),jn=n(O(pe)).appendTo(wn),Ln=jn[0],Nn=n(O(ve)),Fn=!1,Dn={},Wn={},On={},qn={},zn={},Rn={},Hn={},Vn={},Bn=0,Xn=[];gn[Ke]=n(O(Tt)),gn[Ze]=n(O(Wt+" "+qt+ge,O(le))),gn[Qe]=n(O(Wt+" "+Ot+ge,O(se))),Hn[Ke]=[],Hn[Ze]=[],Hn[Qe]=[],Vn[Ke]={},gn.addClass(Le?ft:dt).toggleClass(vt,!o.controlsonstart),hn.fotorama=this,un.startAutoplay=function(t){return un.autoplay?this:(nn=on=!1,y(t||o.autoplay),ui(),this)},un.stopAutoplay=function(){return un.autoplay&&(nn=on=!0,ui()),this},un.show=function(t){var e;"object"!=typeof t?(e=t,t={}):e=t.index,e=">"===e?Ai+1:"<"===e?Ai-1:"<<"===e?0:">>"===e?Ci-1:e,e=isNaN(e)?D(e,Ti,!0):e,e="undefined"==typeof e?Fn||0:e,un.activeIndex=Fn=C(e),Li=M(Fn),Ni=X(Fn),Fi=k(Fn+(Qi?-1:1)),Mi=[Fn,Li,Ni],Ai=Wi?e:Fn;var i=Math.abs(ji-Ai),n=x(t.time,function(){return Math.min(Ui*(1+(i-1)/12),2*Ui)}),r=t.overPos;t.slow&&(n*=10);var a=Pi;un.activeFrame=Pi=Ti[Fn];var l=a===Pi&&!t.user;fi($i,Pi.i!==Ti[k(Ei)].i),de(Mi,"stage"),ye(We?[Ai]:[Ai,M(Ai),X(Ai)]),gi("go",!0),l||ri("show",{user:t.user,time:n}),nn=!0;var u=un.show.onEnd=function(e){if(!u.ok){if(u.ok=!0,e||ii(!0),l||ri("showend",{user:t.user}),!e&&Yi&&Yi!==o.transition)return un.setOptions({transition:Yi}),void(Yi=!1);Vt(),zt(Mi,"stage"),gi("go",!1),je(),hi(),li(),ui()}};if(Vi){var c=Pi[Ke],d=Fn!==ji?Ti[ji][Ke]:null;tt(c,d,bn,{time:n,method:o.transition,onEnd:u},Xn)}else J(yn,{pos:-g(Ai,Wn.w,o.margin,Ei),overPos:r,time:n,onEnd:u});if(Ae(),Oi){Be();var f=T(Fn+s(Ai-ji,-1,1));He({time:n,coo:f!==Fn&&t.coo,guessIndex:"undefined"!=typeof t.coo?f:Fn,keep:l}),qi&&qe(n)}return en="undefined"!=typeof ji&&ji!==Fn,ji=Fn,o.hash&&en&&!un.eq&&j(Pi.id||Fn+1),this},un.requestFullScreen=function(){return Ri&&!un.fullScreen&&(Ji=Me.scrollTop(),tn=Me.scrollLeft(),R(Me),gi("x",!0),rn=n.extend({},Wn),t.addClass(Zt).appendTo(Pe.addClass(ut)),$e.addClass(ut),fi($i,!0,!0),un.fullScreen=!0,Hi&&_e.request(fn),un.resize(),zt(Mi,"stage"),Vt(),ri("fullscreenenter")),this},un.cancelFullScreen=function(){return Hi&&_e.is()?_e.cancel(e):ci(),this},un.toggleFullScreen=function(){return un[(un.fullScreen?"cancel":"request")+"FullScreen"]()},B(e,_e.event,function(){!Ti||_e.is()||$i||ci()}),un.resize=function(t){if(!Ti)return this;var e=arguments[1]||0,i=arguments[2];oi(un.fullScreen?{width:"100%",maxwidth:null,minwidth:null,height:"100%",maxheight:null,minheight:null}:H(t),[Wn,i||un.fullScreen||o]);var n=Wn.width,r=Wn.height,a=Wn.ratio,l=Me.height()-(Oi?Cn.height():0);return v(n)&&(gn.addClass(bt).css({width:n,minWidth:Wn.minwidth||0,maxWidth:Wn.maxwidth||ti}),n=Wn.W=Wn.w=gn.width(),Wn.nw=Oi&&m(o.navwidth,n)||n,o.glimpse&&(Wn.w-=Math.round(2*(m(o.glimpse,n)||0))),yn.css({width:Wn.w,marginLeft:(Wn.W-Wn.w)/2}),r=m(r,l),r=r||a&&n/a,r&&(n=Math.round(n),r=Wn.h=Math.round(s(r,m(Wn.minheight,l),m(Wn.maxheight,l))),wn.stop().animate({width:n,height:r},e,function(){gn.removeClass(bt)}),ii(),Oi&&(Cn.stop().animate({width:Wn.nw},e),He({guessIndex:Fn,time:e,keep:!0}),qi&&xe.nav&&qe(e)),Gi=i||!0,ki())),Bn=wn.offset().left,this},un.setOptions=function(t){return n.extend(o,t),_i(),this},un.shuffle=function(){return Ti&&q(Ti)&&_i(),this},un.destroy=function(){return un.cancelFullScreen(),un.stopAutoplay(),Ti=un.data=null,u(),Mi=[],ei(Ke),_i.ok=!1,this},un.playVideo=function(){var t=Pi,e=t.video,i=Fn;return"object"==typeof e&&t.videoReady&&(Hi&&un.fullScreen&&un.cancelFullScreen(),A(function(){return!_e.is()||i!==Fn},function(){i===Fn&&(t.$video=t.$video||n(n.Fotorama.jst.video(e)),t.$video.appendTo(t[Ke]),gn.addClass(pt),$i=t.$video,h(),kn.blur(),Mn.blur(),ri("loadvideo"))})),this},un.stopVideo=function(){return fi($i,!0,!0),this},wn.on("mousemove",hi),On=nt(yn,{onStart:ai,onMove:function(t,e){di(wn,e.edge)},onTouchEnd:si,onEnd:function(t){di(wn);var e=(Oe&&!sn||t.touch)&&o.arrows&&"always"!==o.arrows;if(t.moved||e&&t.pos!==t.newPos&&!t.control){var i=w(t.newPos,Wn.w,o.margin,Ei);un.show({index:i,time:Vi?Ui:t.time,overPos:t.overPos,user:!0})}else t.aborted||t.control||vi(t.startEvent,e)},timeLow:1,timeHigh:1,friction:2,select:"."+Kt+", ."+Kt+" *",$wrap:wn}),zn=nt(Sn,{onStart:ai,onMove:function(t,e){di(Cn,e.edge)},onTouchEnd:si,onEnd:function(t){function e(){He.l=t.newPos,li(),ui(),be(t.newPos,!0)}if(t.moved)t.pos!==t.newPos?(nn=!0,J(Sn,{time:t.time,pos:t.newPos,overPos:t.overPos,onEnd:e}),be(t.newPos),Ki&&di(Cn,F(t.newPos,zn.min,zn.max))):e();else{var i=t.$target.closest("."+Wt,Sn)[0];i&&wi.call(i,t.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:Cn}),qn=ot(wn,{shift:!0,onEnd:function(t,e){ai(),si(),un.show({index:e,slow:t.altKey})}}),Rn=ot(Cn,{onEnd:function(t,e){ai(),si();var i=_(Sn)+.25*e;Sn.css(c(s(i,zn.min,zn.max))),Ki&&di(Cn,F(i,zn.min,zn.max)),Rn.prevent={"<":i>=zn.max,">":i<=zn.min},clearTimeout(Rn.t),Rn.t=setTimeout(function(){He.l=i,be(i,!0)},ze),be(i)}}),gn.hover(function(){setTimeout(function(){an||pi(!(sn=!0))},0)},function(){sn&&pi(!(sn=!1))}),W(kn,function(t){Q(t),yi.call(this,t)},{onStart:function(){ai(),On.control=!0},onTouchEnd:si}),kn.each(function(){Y(this,function(t){yi.call(this,t)}),bi(this)}),Y(En,un.toggleFullScreen),bi(En),n.each("load push pop shift unshift reverse sort splice".split(" "),function(t,e){un[e]=function(){return Ti=Ti||[],"load"!==e?Array.prototype[e].apply(Ti,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(Ti=z(arguments[0])),_i(),un}}),_i()},n.fn.fotorama=function(e){return this.each(function(){var i=this,o=n(this),r=o.data(),a=r.fotorama;a?a.setOptions(e,!0):A(function(){return!M(i)},function(){r.urtext=o.html(),new n.Fotorama(o,n.extend({},ii,t.fotoramaDefaults,e,r))})})},n.Fotorama.instances=[],n.Fotorama.cache={},n.Fotorama.measures={},n=n||{},n.Fotorama=n.Fotorama||{},n.Fotorama.jst=n.Fotorama.jst||{},n.Fotorama.jst.style=function(t){var e,i="";return ye.escape,i+=".fotorama"+(null==(e=t.s)?"":e)+" .fotorama__nav--thumbs .fotorama__nav__frame{\npadding:"+(null==(e=t.m)?"":e)+"px;\nheight:"+(null==(e=t.h)?"":e)+"px}\n.fotorama"+(null==(e=t.s)?"":e)+" .fotorama__thumb-border{\nheight:"+(null==(e=t.h-t.b*(t.q?0:2))?"":e)+"px;\nborder-width:"+(null==(e=t.b)?"":e)+"px;\nmargin-top:"+(null==(e=t.m)?"":e)+"px}"},n.Fotorama.jst.video=function(t){function e(){i+=n.call(arguments,"")}var i="",n=(ye.escape,Array.prototype.join);return i+='<div class="fotorama__video"><iframe src="',e(("youtube"==t.type?t.p+"youtube.com/embed/"+t.id+"?autoplay=1":"vimeo"==t.type?t.p+"player.vimeo.com/video/"+t.id+"?autoplay=1&badge=0":t.id)+(t.s&&"custom"!=t.type?"&"+t.s:"")),i+='" frameborder="0" allowfullscreen></iframe></div>\n'},n(function(){n("."+lt+':not([data-auto="false"])').fotorama()})}(window,document,location,"undefined"!=typeof jQuery&&jQuery),!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";function e(t){if(t instanceof Date)return t;if(String(t).match(a))return String(t).match(/^[0-9]*$/)&&(t=Number(t)),String(t).match(/\-/)&&(t=String(t).replace(/\-/g,"/")),new Date(t);throw new Error("Couldn't cast `"+t+"` to a date object.")}function i(t){var e=t.toString().replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return new RegExp(e)}function n(t){return function(e){var n=e.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(n)for(var r=0,a=n.length;a>r;++r){var s=n[r].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),u=i(s[0]),c=s[1]||"",d=s[3]||"",f=null;s=s[2],l.hasOwnProperty(s)&&(f=l[s],f=Number(t[f])),null!==f&&("!"===c&&(f=o(d,f)),""===c&&10>f&&(f="0"+f.toString()),e=e.replace(u,f.toString()))}return e=e.replace(/%%/,"%")}}function o(t,e){var i="s",n="";return t&&(t=t.replace(/(:|;|\s)/gi,"").split(/\,/),1===t.length?i=t[0]:(n=t[0],i=t[1])),1===Math.abs(e)?n:i}var r=[],a=[],s={precision:100,elapse:!1};a.push(/^[0-9]*$/.source),a.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),a.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),a=new RegExp(a.join("|"));var l={Y:"years",m:"months",n:"daysToMonth",w:"weeks",d:"daysToWeek",D:"totalDays",H:"hours",M:"minutes",S:"seconds"},u=function(e,i,n){this.el=e,this.$el=t(e),this.interval=null,this.offset={},this.options=t.extend({},s),this.instanceNumber=r.length,r.push(this),this.$el.data("countdown-instance",this.instanceNumber),n&&("function"==typeof n?(this.$el.on("update.countdown",n),this.$el.on("stoped.countdown",n),this.$el.on("finish.countdown",n)):this.options=t.extend({},s,n)),this.setFinalDate(i),this.start()};t.extend(u.prototype,{start:function(){null!==this.interval&&clearInterval(this.interval);var t=this;this.update(),this.interval=setInterval(function(){t.update.call(t)},this.options.precision)},stop:function(){clearInterval(this.interval),this.interval=null,this.dispatchEvent("stoped")},toggle:function(){this.interval?this.stop():this.start()},pause:function(){this.stop()},resume:function(){this.start()},remove:function(){this.stop.call(this),r[this.instanceNumber]=null,delete this.$el.data().countdownInstance},setFinalDate:function(t){this.finalDate=e(t)},update:function(){if(0===this.$el.closest("html").length)return void this.remove();var e,i=void 0!==t._data(this.el,"events"),n=new Date;e=this.finalDate.getTime()-n.getTime(),e=Math.ceil(e/1e3),e=!this.options.elapse&&0>e?0:Math.abs(e),this.totalSecsLeft!==e&&i&&(this.totalSecsLeft=e,this.elapsed=n>=this.finalDate,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToWeek:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToMonth:Math.floor(this.totalSecsLeft/60/60/24%30.4368),totalDays:Math.floor(this.totalSecsLeft/60/60/24),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),months:Math.floor(this.totalSecsLeft/60/60/24/30.4368),years:Math.abs(this.finalDate.getFullYear()-n.getFullYear())},this.options.elapse||0!==this.totalSecsLeft?this.dispatchEvent("update"):(this.stop(),this.dispatchEvent("finish")))},dispatchEvent:function(e){var i=t.Event(e+".countdown");i.finalDate=this.finalDate,i.elapsed=this.elapsed,i.offset=t.extend({},this.offset),i.strftime=n(this.offset),this.$el.trigger(i)}}),t.fn.countdown=function(){var e=Array.prototype.slice.call(arguments,0);return this.each(function(){var i=t(this).data("countdown-instance");if(void 0!==i){var n=r[i],o=e[0];u.prototype.hasOwnProperty(o)?n[o].apply(n,e.slice(1)):null===String(o).match(/^[$A-Z_][0-9A-Z_$]*$/i)?(n.setFinalDate.call(n,o),n.start()):t.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,o))}else new u(this,e[0],e[1])})}}),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){var e,i=navigator.userAgent,n=/iphone/i.test(i),o=/chrome/i.test(i),r=/android/i.test(i);t.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},t.fn.extend({caret:function(t,e){var i;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof t?(e="number"==typeof e?e:t,this.each(function(){this.setSelectionRange?this.setSelectionRange(t,e):this.createTextRange&&(i=this.createTextRange(),i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select())})):(this[0].setSelectionRange?(t=this[0].selectionStart,e=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),t=0-i.duplicate().moveStart("character",-1e5),e=t+i.text.length),{begin:t,end:e})},unmask:function(){return this.trigger("unmask")},mask:function(i,a){var s,l,u,c,d,f,p,h;if(!i&&this.length>0){s=t(this[0]);var m=s.data(t.mask.dataName);return m?m():void 0}return a=t.extend({autoclear:t.mask.autoclear,placeholder:t.mask.placeholder,completed:null},a),l=t.mask.definitions,u=[],c=p=i.length,d=null,t.each(i.split(""),function(t,e){"?"==e?(p--,c=t):l[e]?(u.push(new RegExp(l[e])),null===d&&(d=u.length-1),c>t&&(f=u.length-1)):u.push(null)}),this.trigger("unmask").each(function(){function s(){if(a.completed){for(var t=d;f>=t;t++)if(u[t]&&$[t]===m(t))return;a.completed.call(I)}}function m(t){return a.placeholder.charAt(t<a.placeholder.length?t:0)}function v(t){for(;++t<p&&!u[t];);return t}function g(t){for(;--t>=0&&!u[t];);return t}function w(t,e){var i,n;if(!(0>t)){for(i=t,n=v(e);p>i;i++)if(u[i]){if(!(p>n&&u[i].test($[n])))break;$[i]=$[n],$[n]=m(n),n=v(n)}C(),I.caret(Math.max(d,t))}}function y(t){var e,i,n,o;for(e=t,i=m(t);p>e;e++)if(u[e]){if(n=v(e),o=$[e],$[e]=i,!(p>n&&u[n].test(o)))break;i=o}}function b(){var t=I.val(),e=I.caret();if(h&&h.length&&h.length>t.length){for(S(!0);e.begin>0&&!u[e.begin-1];)e.begin--;if(0===e.begin)for(;e.begin<d&&!u[e.begin];)e.begin++;I.caret(e.begin,e.begin)}else{for(S(!0);e.begin<p&&!u[e.begin];)e.begin++;I.caret(e.begin,e.begin)}s()}function _(){S(),I.val()!=M&&I.change()}function x(t){if(!I.prop("readonly")){var e,i,o,r=t.which||t.keyCode;h=I.val(),8===r||46===r||n&&127===r?(e=I.caret(),i=e.begin,o=e.end,o-i===0&&(i=46!==r?g(i):o=v(i-1),o=46===r?v(o):o),T(i,o),w(i,o-1),t.preventDefault()):13===r?_.call(this,t):27===r&&(I.val(M),I.caret(0,S()),t.preventDefault())}}function k(e){if(!I.prop("readonly")){var i,n,o,a=e.which||e.keyCode,l=I.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||32>a)&&a&&13!==a){if(l.end-l.begin!==0&&(T(l.begin,l.end),w(l.begin,l.end-1)),i=v(l.begin-1),p>i&&(n=String.fromCharCode(a),u[i].test(n))){if(y(i),$[i]=n,C(),o=v(i),r){var c=function(){t.proxy(t.fn.caret,I,o)()};setTimeout(c,0)}else I.caret(o);l.begin<=f&&s()}e.preventDefault()}}}function T(t,e){var i;for(i=t;e>i&&p>i;i++)u[i]&&($[i]=m(i))}function C(){I.val($.join(""))}function S(t){var e,i,n,o=I.val(),r=-1;for(e=0,n=0;p>e;e++)if(u[e]){for($[e]=m(e);n++<o.length;)if(i=o.charAt(n-1),u[e].test(i)){$[e]=i,r=e;break}if(n>o.length){T(e+1,p);break}}else $[e]===o.charAt(n)&&n++,c>e&&(r=e);return t?C():c>r+1?a.autoclear||$.join("")===P?(I.val()&&I.val(""),T(0,p)):C():(C(),I.val(I.val().substring(0,r+1))),c?e:d}var I=t(this),$=t.map(i.split(""),function(t,e){return"?"!=t?l[t]?m(e):t:void 0}),P=$.join(""),M=I.val();I.data(t.mask.dataName,function(){return t.map($,function(t,e){return u[e]&&t!=m(e)?t:null}).join("")}),I.one("unmask",function(){I.off(".mask").removeData(t.mask.dataName)}).on("focus.mask",function(){if(!I.prop("readonly")){clearTimeout(e);var t;M=I.val(),t=S(),e=setTimeout(function(){I.get(0)===document.activeElement&&(C(),t==i.replace("?","").length?I.caret(0,t):I.caret(t))},10)}}).on("blur.mask",_).on("keydown.mask",x).on("keypress.mask",k).on("input.mask paste.mask",function(){I.prop("readonly")||setTimeout(function(){var t=S(!0);I.caret(t),s()},0)}),o&&r&&I.off("input.mask").on("input.mask",b),S()})}})}),"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t,e,i){var n={init:function(e,i){this.$elem=t(i),this.options=t.extend({},t.fn.owlCarousel.options,this.$elem.data(),e),this.userOptions=e,this.loadContent()},loadContent:function(){function e(t){var e,i="";if("function"==typeof n.options.jsonSuccess)n.options.jsonSuccess.apply(this,[t]);else{for(e in t.owl)t.owl.hasOwnProperty(e)&&(i+=t.owl[e].item);n.$elem.html(i)}n.logIn()}var i,n=this;"function"==typeof n.options.beforeInit&&n.options.beforeInit.apply(this,[n.$elem]),"string"==typeof n.options.jsonPath?(i=n.options.jsonPath,t.getJSON(i,e)):n.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style")),this.$elem.data("owl-originalClasses",this.$elem.attr("class")),this.$elem.css({opacity:0}),this.orignalItems=this.options.items,this.checkBrowser(),this.wrapperWidth=0,this.checkVisible=null,this.setVars()},setVars:function(){return 0===this.$elem.children().length?!1:(this.baseClass(),this.eventTypes(),this.$userItems=this.$elem.children(),this.itemsAmount=this.$userItems.length,this.wrapItems(),this.$owlItems=this.$elem.find(".owl-item"),this.$owlWrapper=this.$elem.find(".owl-wrapper"),this.playDirection="next",this.prevItem=0,this.prevArr=[0],this.currentItem=0,this.customEvents(),void this.onStartup())},onStartup:function(){this.updateItems(),this.calculateAll(),this.buildControls(),this.updateControls(),this.response(),this.moveEvents(),this.stopOnHover(),this.owlStatus(),!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle),!0===this.options.autoPlay&&(this.options.autoPlay=5e3),this.play(),this.$elem.find(".owl-wrapper").css("display","block"),this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility(),this.onstartup=!1,this.eachMoveUpdate(),"function"==typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad(),!0===this.options.autoHeight&&this.autoHeight(),this.onVisibleItems(),"function"==typeof this.options.afterAction&&this.options.afterAction.apply(this,[this.$elem])},updateVars:function(){"function"==typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]),this.watchVisibility(),this.updateItems(),this.calculateAll(),this.updatePosition(),this.updateControls(),this.eachMoveUpdate(),"function"==typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var t=this;e.setTimeout(function(){t.updateVars()},0)},watchVisibility:function(){var t=this;return!1!==t.$elem.is(":visible")?!1:(t.$elem.css({opacity:0}),e.clearInterval(t.autoPlayInterval),e.clearInterval(t.checkVisible),void(t.checkVisible=e.setInterval(function(){t.$elem.is(":visible")&&(t.reload(),t.$elem.animate({opacity:1},200),e.clearInterval(t.checkVisible))},500)))},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>'),this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">'),this.wrapperOuter=this.$elem.find(".owl-wrapper-outer"),this.$elem.css("display","block")},baseClass:function(){var t=this.$elem.hasClass(this.options.baseClass),e=this.$elem.hasClass(this.options.theme);t||this.$elem.addClass(this.options.baseClass),e||this.$elem.addClass(this.options.theme)},updateItems:function(){var e,i;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=!1,this.options.itemsMobile=!1;if(e=t(this.options.responsiveBaseWidth).width(),e>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems),!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(t,e){return t[0]-e[0]}),i=0;i<this.options.itemsCustom.length;i+=1)this.options.itemsCustom[i][0]<=e&&(this.options.items=this.options.itemsCustom[i][1]);else e<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),e<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),e<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),e<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),e<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var i,n,o=this;return!0!==o.options.responsive?!1:(n=t(e).width(),o.resizer=function(){t(e).width()!==n&&(!1!==o.options.autoPlay&&e.clearInterval(o.autoPlayInterval),e.clearTimeout(i),i=e.setTimeout(function(){n=t(e).width(),o.updateVars()},o.options.responsiveRefreshRate))},void t(e).resize(o.resizer))},updatePosition:function(){this.jumpTo(this.currentItem),!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var e=this,i=0,n=e.itemsAmount-e.options.items;e.$owlItems.each(function(o){var r=t(this);r.css({width:e.itemWidth}).data("owl-item",Number(o)),(0===o%e.options.items||o===n)&&(o>n||(i+=1)),r.data("owl-roundPages",i)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0}),this.appendItemsSizes()},calculateAll:function(){this.calculateWidth(),this.appendWrapperSizes(),this.loops(),this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/this.options.items)},max:function(){var t=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);return this.options.items>this.itemsAmount?this.maximumPixels=t=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=t),t},min:function(){return 0},loops:function(){var e,i,n=0,o=0;for(this.positionsInArray=[0],this.pagesInArray=[],e=0;e<this.itemsAmount;e+=1)o+=this.itemWidth,this.positionsInArray.push(-o),!0===this.options.scrollPerPage&&(i=t(this.$owlItems[e]),i=i.data("owl-roundPages"),i!==n&&(this.pagesInArray[n]=this.positionsInArray[e],n=i))},buildControls:function(){(!0===this.options.navigation||!0===this.options.pagination)&&(this.owlControls=t('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem)),!0===this.options.pagination&&this.buildPagination(),!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var e=this,i=t('<div class="owl-buttons"/>');e.owlControls.append(i),e.buttonPrev=t("<div/>",{"class":"owl-prev",html:e.options.navigationText[0]||""}),e.buttonNext=t("<div/>",{"class":"owl-next",html:e.options.navigationText[1]||""}),i.append(e.buttonPrev).append(e.buttonNext),i.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(t){t.preventDefault()}),i.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(i){i.preventDefault(),t(this).hasClass("owl-next")?e.next():e.prev()})},buildPagination:function(){var e=this;e.paginationWrapper=t('<div class="owl-pagination"/>'),e.owlControls.append(e.paginationWrapper),e.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(i){i.preventDefault(),Number(t(this).data("owl-page"))!==e.currentItem&&e.goTo(Number(t(this).data("owl-page")),!0)})},updatePagination:function(){var e,i,n,o,r,a;if(!1===this.options.pagination)return!1;for(this.paginationWrapper.html(""),e=0,i=this.itemsAmount-this.itemsAmount%this.options.items,o=0;o<this.itemsAmount;o+=1)0===o%this.options.items&&(e+=1,i===o&&(n=this.itemsAmount-this.options.items),r=t("<div/>",{"class":"owl-page"}),a=t("<span></span>",{text:!0===this.options.paginationNumbers?e:"","class":!0===this.options.paginationNumbers?"owl-numbers":""}),r.append(a),r.data("owl-page",i===o?n:o),r.data("owl-roundPages",e),this.paginationWrapper.append(r));this.checkPagination()},checkPagination:function(){var e=this;return!1===e.options.pagination?!1:void e.paginationWrapper.find(".owl-page").each(function(){t(this).data("owl-roundPages")===t(e.$owlItems[e.currentItem]).data("owl-roundPages")&&(e.paginationWrapper.find(".owl-page").removeClass("active"),t(this).addClass("active"))})},checkNavigation:function(){return!1===this.options.navigation?!1:void(!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled"))))},updateControls:function(){this.updatePagination(),this.checkNavigation(),this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(t){if(this.isTransition)return!1;if(this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1,this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0)){if(!0!==this.options.rewindNav)return this.currentItem=this.maximumItem,!1;this.currentItem=0,t="rewind"}this.goTo(this.currentItem,t)},prev:function(t){if(this.isTransition)return!1;if(this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?this.options.items:1),0>this.currentItem){if(!0!==this.options.rewindNav)return this.currentItem=0,!1;this.currentItem=this.maximumItem,t="rewind"}this.goTo(this.currentItem,t)},goTo:function(t,i,n){var o=this;return o.isTransition?!1:("function"==typeof o.options.beforeMove&&o.options.beforeMove.apply(this,[o.$elem]),t>=o.maximumItem?t=o.maximumItem:0>=t&&(t=0),o.currentItem=o.owl.currentItem=t,!1!==o.options.transitionStyle&&"drag"!==n&&1===o.options.items&&!0===o.browser.support3d?(o.swapSpeed(0),!0===o.browser.support3d?o.transition3d(o.positionsInArray[t]):o.css2slide(o.positionsInArray[t],1),o.afterGo(),o.singleItemTransition(),!1):(t=o.positionsInArray[t],!0===o.browser.support3d?(o.isCss3Finish=!1,!0===i?(o.swapSpeed("paginationSpeed"),e.setTimeout(function(){o.isCss3Finish=!0},o.options.paginationSpeed)):"rewind"===i?(o.swapSpeed(o.options.rewindSpeed),e.setTimeout(function(){o.isCss3Finish=!0},o.options.rewindSpeed)):(o.swapSpeed("slideSpeed"),e.setTimeout(function(){o.isCss3Finish=!0},o.options.slideSpeed)),o.transition3d(t)):!0===i?o.css2slide(t,o.options.paginationSpeed):"rewind"===i?o.css2slide(t,o.options.rewindSpeed):o.css2slide(t,o.options.slideSpeed),void o.afterGo()))},jumpTo:function(t){"function"==typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]),t>=this.maximumItem||-1===t?t=this.maximumItem:0>=t&&(t=0),this.swapSpeed(0),!0===this.browser.support3d?this.transition3d(this.positionsInArray[t]):this.css2slide(this.positionsInArray[t],1),this.currentItem=this.owl.currentItem=t,this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem),this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2],this.prevArr.shift(0),this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp()),"function"==typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop",e.clearInterval(this.autoPlayInterval)},checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var t=this;return t.apStatus="play",!1===t.options.autoPlay?!1:(e.clearInterval(t.autoPlayInterval),void(t.autoPlayInterval=e.setInterval(function(){t.next(!0)},t.options.autoPlay)))},swapSpeed:function(t){"slideSpeed"===t?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===t?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!=typeof t&&this.$owlWrapper.css(this.addCssSpeed(t))},addCssSpeed:function(t){return{"-webkit-transition":"all "+t+"ms ease","-moz-transition":"all "+t+"ms ease","-o-transition":"all "+t+"ms ease",transition:"all "+t+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(t){return{"-webkit-transform":"translate3d("+t+"px, 0px, 0px)","-moz-transform":"translate3d("+t+"px, 0px, 0px)","-o-transform":"translate3d("+t+"px, 0px, 0px)","-ms-transform":"translate3d("+t+"px, 0px, 0px)",transform:"translate3d("+t+"px, 0px,0px)"}},transition3d:function(t){this.$owlWrapper.css(this.doTranslate(t))},css2move:function(t){this.$owlWrapper.css({left:t})},css2slide:function(t,e){var i=this;i.isCssFinish=!1,i.$owlWrapper.stop(!0,!0).animate({left:t},{duration:e||i.options.slideSpeed,complete:function(){i.isCssFinish=!0}})},checkBrowser:function(){var t=i.createElement("div");t.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)",t=t.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g),this.browser={support3d:null!==t&&1===t.length,isTouch:"ontouchstart"in e||e.navigator.msMaxTouchPoints}},moveEvents:function(){(!1!==this.options.mouseDrag||!1!==this.options.touchDrag)&&(this.gestures(),this.disabledEvents())},eventTypes:function(){var t=["s","e","x"];this.ev_types={},!0===this.options.mouseDrag&&!0===this.options.touchDrag?t=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:!1===this.options.mouseDrag&&!0===this.options.touchDrag?t=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(t=["mousedown.owl","mousemove.owl","mouseup.owl"]),this.ev_types.start=t[0],this.ev_types.move=t[1],this.ev_types.end=t[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(t){t.preventDefault()}),this.$elem.on("mousedown.disableTextSelect",function(e){return t(e.target).is("input, textarea, select, option")})},gestures:function(){function n(t){if(void 0!==t.touches)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(void 0===t.touches){if(void 0!==t.pageX)return{x:t.pageX,y:t.pageY};if(void 0===t.pageX)return{x:t.clientX,y:t.clientY}}}function o(e){"on"===e?(t(i).on(s.ev_types.move,r),t(i).on(s.ev_types.end,a)):"off"===e&&(t(i).off(s.ev_types.move),t(i).off(s.ev_types.end))}function r(o){o=o.originalEvent||o||e.event,s.newPosX=n(o).x-l.offsetX,s.newPosY=n(o).y-l.offsetY,s.newRelativeX=s.newPosX-l.relativePos,"function"==typeof s.options.startDragging&&!0!==l.dragging&&0!==s.newRelativeX&&(l.dragging=!0,s.options.startDragging.apply(s,[s.$elem])),(8<s.newRelativeX||-8>s.newRelativeX)&&!0===s.browser.isTouch&&(void 0!==o.preventDefault?o.preventDefault():o.returnValue=!1,l.sliding=!0),(10<s.newPosY||-10>s.newPosY)&&!1===l.sliding&&t(i).off("touchmove.owl"),s.newPosX=Math.max(Math.min(s.newPosX,s.newRelativeX/5),s.maximumPixels+s.newRelativeX/5),!0===s.browser.support3d?s.transition3d(s.newPosX):s.css2move(s.newPosX)}function a(i){i=i.originalEvent||i||e.event;var n;i.target=i.target||i.srcElement,l.dragging=!1,!0!==s.browser.isTouch&&s.$owlWrapper.removeClass("grabbing"),s.dragDirection=s.owl.dragDirection=0>s.newRelativeX?"left":"right",0!==s.newRelativeX&&(n=s.getNewPosition(),s.goTo(n,!1,"drag"),l.targetElement===i.target&&!0!==s.browser.isTouch&&(t(i.target).on("click.disable",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t(e.target).off("click.disable")}),i=t._data(i.target,"events").click,n=i.pop(),i.splice(0,0,n))),o("off")}var s=this,l={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};s.isCssFinish=!0,s.$elem.on(s.ev_types.start,".owl-wrapper",function(i){i=i.originalEvent||i||e.event;var r;if(3===i.which)return!1;if(!(s.itemsAmount<=s.options.items)){if(!1===s.isCssFinish&&!s.options.dragBeforeAnimFinish||!1===s.isCss3Finish&&!s.options.dragBeforeAnimFinish)return!1;!1!==s.options.autoPlay&&e.clearInterval(s.autoPlayInterval),!0===s.browser.isTouch||s.$owlWrapper.hasClass("grabbing")||s.$owlWrapper.addClass("grabbing"),s.newPosX=0,s.newRelativeX=0,t(this).css(s.removeTransition()),r=t(this).position(),l.relativePos=r.left,l.offsetX=n(i).x-r.left,l.offsetY=n(i).y-r.top,o("on"),l.sliding=!1,l.targetElement=i.target||i.srcElement}})},getNewPosition:function(){var t=this.closestItem();return t>this.maximumItem?t=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=t=0),t},closestItem:function(){var e=this,i=!0===e.options.scrollPerPage?e.pagesInArray:e.positionsInArray,n=e.newPosX,o=null;return t.each(i,function(r,a){
n-e.itemWidth/20>i[r+1]&&n-e.itemWidth/20<a&&"left"===e.moveDirection()?(o=a,e.currentItem=!0===e.options.scrollPerPage?t.inArray(o,e.positionsInArray):r):n+e.itemWidth/20<a&&n+e.itemWidth/20>(i[r+1]||i[r]-e.itemWidth)&&"right"===e.moveDirection()&&(!0===e.options.scrollPerPage?(o=i[r+1]||i[i.length-1],e.currentItem=t.inArray(o,e.positionsInArray)):(o=i[r+1],e.currentItem=r+1))}),e.currentItem},moveDirection:function(){var t;return 0>this.newRelativeX?(t="right",this.playDirection="next"):(t="left",this.playDirection="prev"),t},customEvents:function(){var t=this;t.$elem.on("owl.next",function(){t.next()}),t.$elem.on("owl.prev",function(){t.prev()}),t.$elem.on("owl.play",function(e,i){t.options.autoPlay=i,t.play(),t.hoverStatus="play"}),t.$elem.on("owl.stop",function(){t.stop(),t.hoverStatus="stop"}),t.$elem.on("owl.goTo",function(e,i){t.goTo(i)}),t.$elem.on("owl.jumpTo",function(e,i){t.jumpTo(i)})},stopOnHover:function(){var t=this;!0===t.options.stopOnHover&&!0!==t.browser.isTouch&&!1!==t.options.autoPlay&&(t.$elem.on("mouseover",function(){t.stop()}),t.$elem.on("mouseout",function(){"stop"!==t.hoverStatus&&t.play()}))},lazyLoad:function(){var e,i,n,o,r;if(!1===this.options.lazyLoad)return!1;for(e=0;e<this.itemsAmount;e+=1)i=t(this.$owlItems[e]),"loaded"!==i.data("owl-loaded")&&(n=i.data("owl-item"),o=i.find(".lazyOwl"),"string"!=typeof o.data("src")?i.data("owl-loaded","loaded"):(void 0===i.data("owl-loaded")&&(o.hide(),i.addClass("loading").data("owl-loaded","checked")),(r=!0===this.options.lazyFollow?n>=this.currentItem:!0)&&n<this.currentItem+this.options.items&&o.length&&this.lazyPreload(i,o)))},lazyPreload:function(t,i){function n(){t.data("owl-loaded","loaded").removeClass("loading"),i.removeAttr("data-src"),"fade"===a.options.lazyEffect?i.fadeIn(400):i.show(),"function"==typeof a.options.afterLazyLoad&&a.options.afterLazyLoad.apply(this,[a.$elem])}function o(){s+=1,a.completeImg(i.get(0))||!0===r?n():100>=s?e.setTimeout(o,100):n()}var r,a=this,s=0;"DIV"===i.prop("tagName")?(i.css("background-image","url("+i.data("src")+")"),r=!0):i[0].src=i.data("src"),o()},autoHeight:function(){function i(){var i=t(r.$owlItems[r.currentItem]).height();r.wrapperOuter.css("height",i+"px"),r.wrapperOuter.hasClass("autoHeight")||e.setTimeout(function(){r.wrapperOuter.addClass("autoHeight")},0)}function n(){o+=1,r.completeImg(a.get(0))?i():100>=o?e.setTimeout(n,100):r.wrapperOuter.css("height","")}var o,r=this,a=t(r.$owlItems[r.currentItem]).find("img");void 0!==a.get(0)?(o=0,n()):i()},completeImg:function(t){return!t.complete||"undefined"!=typeof t.naturalWidth&&0===t.naturalWidth?!1:!0},onVisibleItems:function(){var e;for(!0===this.options.addClassActive&&this.$owlItems.removeClass("active"),this.visibleItems=[],e=this.currentItem;e<this.currentItem+this.options.items;e+=1)this.visibleItems.push(e),!0===this.options.addClassActive&&t(this.$owlItems[e]).addClass("active");this.owl.visibleItems=this.visibleItems},transitionTypes:function(t){this.outClass="owl-"+t+"-out",this.inClass="owl-"+t+"-in"},singleItemTransition:function(){var t=this,e=t.outClass,i=t.inClass,n=t.$owlItems.eq(t.currentItem),o=t.$owlItems.eq(t.prevItem),r=Math.abs(t.positionsInArray[t.currentItem])+t.positionsInArray[t.prevItem],a=Math.abs(t.positionsInArray[t.currentItem])+t.itemWidth/2;t.isTransition=!0,t.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":a+"px","-moz-perspective-origin":a+"px","perspective-origin":a+"px"}),o.css({position:"relative",left:r+"px"}).addClass(e).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){t.endPrev=!0,o.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend"),t.clearTransStyle(o,e)}),n.addClass(i).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){t.endCurrent=!0,n.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend"),t.clearTransStyle(n,i)})},clearTransStyle:function(t,e){t.css({position:"",left:""}).removeClass(e),this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect"),t(i).off(".owl owl"),t(e).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove()),this.clearEvents(),this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop(),e.clearInterval(this.checkVisible),this.unWrap(),this.$elem.removeData()},reinit:function(e){e=t.extend({},this.userOptions,e),this.unWrap(),this.init(e,this.$elem)},addItem:function(t,e){var i;return t?0===this.$elem.children().length?(this.$elem.append(t),this.setVars(),!1):(this.unWrap(),i=void 0===e||-1===e?-1:e,i>=this.$userItems.length||-1===i?this.$userItems.eq(-1).after(t):this.$userItems.eq(i).before(t),void this.setVars()):!1},removeItem:function(t){return 0===this.$elem.children().length?!1:(t=void 0===t||-1===t?-1:t,this.unWrap(),this.$userItems.eq(t).remove(),void this.setVars())}};t.fn.owlCarousel=function(e){return this.each(function(){if(!0===t(this).data("owl-init"))return!1;t(this).data("owl-init",!0);var i=Object.create(n);i.init(e,this),t.data(this,"owlCarousel",i)})},t.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:e,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}}(jQuery,window,document),function(t,e){"use strict";function i(t){var e=B(0),i=t.trim().slice(e.length).match(/^\s*(\S+?)\s*(?:,\s*(\S+))?\s+in\s+(.+)$/);return i?{key:i[1],pos:i[2],val:e+i[3]}:{val:t}}function n(t,e,i){var n={};return n[t.key]=e,t.pos&&(n[t.pos]=i),n}function o(t,e,o){p(t,"each");var r,a=g(t),l=t.outerHTML,u=!!K[a],c=K[a]||{tmpl:l},d=t.parentNode,f=document.createComment("riot placeholder"),m=[],v=h(t);d.insertBefore(f,t),o=i(o),e.one("premount",function(){d.stub&&(d=e.root),t.parentNode.removeChild(t)}).on("update",function(){var i=X(o.val,e);H(i)||(r=i?JSON.stringify(i):"",i=i?Object.keys(i).map(function(t){return n(o,t,i[t])}):[]);for(var l=document.createDocumentFragment(),p=m.length,h=i.length;p>h;)m[--p].unmount(),m.splice(p,1);for(p=0;h>p;++p){var g=!r&&o.key?n(o,i[p],p):i[p];m[p]?m[p].update(g):((m[p]=new s(c,{parent:e,isLoop:!0,hasImpl:u,root:q.test(a)?d:t.cloneNode(),item:g},t.innerHTML)).mount(),l.appendChild(m[p].root)),m[p]._item=g}d.insertBefore(l,f),v&&(e.tags[a]=m)}).one("updated",function(){var t=Object.keys(e);b(d,function(i){1!=i.nodeType||i.isLoop||i._looped||(i._visited=!1,i._looped=!0,$(i,e,t))})})}function r(t,e,i){b(t,function(t){if(1==t.nodeType){t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||t.getAttribute("each")?1:0;var n=h(t);n&&!t.isLoop&&i.push(m(n,t,e)),t.isLoop||$(t,e,[])}})}function a(t,e,i){function n(t,e,n){if(e.indexOf(B(0))>=0){var o={dom:t,expr:e};i.push(w(o,n))}}b(t,function(t){var i=t.nodeType;if(3==i&&"STYLE"!=t.parentNode.tagName&&n(t,t.nodeValue),1==i){var r=t.getAttribute("each");return r?(o(t,e,r),!1):(d(t.attributes,function(e){var i=e.name,o=i.split("__")[1];return n(t,e.value,{attr:o||i,bool:o}),o?(p(t,i),!1):void 0}),h(t)?!1:void 0)}})}function s(t,i,n){function o(){var t=k&&b?p:g||p;d(P.attributes,function(e){h[e.name]=X(e.value,t)}),d(Object.keys(L),function(e){h[e]=X(L[e],t)})}function s(t){for(var e in C)typeof p[e]!==W&&(p[e]=t[e])}function l(){p.parent&&b&&d(Object.keys(p.parent),function(t){var e=!~z.indexOf(t)&&~N.indexOf(t);(typeof p[t]===W||e)&&(e||N.push(t),p[t]=p.parent[t])})}function u(t){if(d($,function(e){e[t?"mount":"unmount"]()}),g){var e=t?"on":"off";b?g[e]("unmount",p.unmount):g[e]("update",p.update)[e]("unmount",p.unmount)}}var p=A.observable(this),h=I(i.opts)||{},m=U(t.tmpl),g=i.parent,b=i.isLoop,k=i.hasImpl,C=y(i.item),S=[],$=[],P=i.root,M=t.fn,E=P.tagName.toLowerCase(),L={},N=[];M&&P._tag&&P._tag.unmount(!0),this.isMounted=!1,P.isLoop=b,P._tag=this,this._id=j++,w(this,{parent:g,root:P,opts:h,tags:{}},C),d(P.attributes,function(t){var e=t.value;B(/{.*}/).test(e)&&(L[t.name]=e)}),m.innerHTML&&!/^(select|optgroup|table|tbody|tr|col(?:group)?)$/.test(E)&&(m.innerHTML=T(m.innerHTML,n)),this.update=function(t){t=y(t),l(),t&&typeof C===D&&(s(t),C=t),w(p,t),o(),p.trigger("update",t),c(S,p),p.trigger("updated")},this.mixin=function(){d(arguments,function(t){t=typeof t===F?A.mixin(t):t,d(Object.keys(t),function(e){"init"!=e&&(p[e]=f(t[e])?t[e].bind(p):t[e])}),t.init&&t.init.bind(p)()})},this.mount=function(){if(o(),M&&M.call(p,h),a(m,p,S),u(!0),(t.attrs||k)&&(_(t.attrs,function(t,e){P.setAttribute(t,e)}),a(p.root,p,S)),(!p.parent||b)&&p.update(C),p.trigger("premount"),b&&!k)p.root=P=m.firstChild;else{for(;m.firstChild;)P.appendChild(m.firstChild);P.stub&&(p.root=P=g.root)}!p.parent||p.parent.isMounted?(p.isMounted=!0,p.trigger("mount")):p.parent.one("mount",function(){x(p.root)||(p.parent.isMounted=p.isMounted=!0,p.trigger("mount"))})},this.unmount=function(t){var i,n=P,o=n.parentNode;if(o){if(g)i=v(g),H(i.tags[E])?d(i.tags[E],function(t,e){t._id==p._id&&i.tags[E].splice(e,1)}):i.tags[E]=e;else for(;n.firstChild;)n.removeChild(n.firstChild);t?o.removeAttribute("riot-tag"):o.removeChild(n)}p.trigger("unmount"),u(),p.off("*"),P._tag=null},r(m,this,$)}function l(e,i,n,o){n[e]=function(e){var r,a=o._item,s=o.parent;if(!a)for(;s&&!a;)a=s._item,s=s.parent;e=e||t.event;try{e.currentTarget=n,e.target||(e.target=e.srcElement),e.which||(e.which=e.charCode||e.keyCode)}catch(l){}e.item=a,i.call(o,e)===!0||/radio|check/.test(n.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),e.preventUpdate||(r=a?v(s):o,r.update())}}function u(t,e,i){t&&(t.insertBefore(i,e),t.removeChild(e))}function c(t,e){d(t,function(t,i){var n=t.dom,o=t.attr,r=X(t.expr,e),a=t.dom.parentNode;if(t.bool?r=r?o:!1:null==r&&(r=""),a&&"TEXTAREA"==a.tagName&&(r=(""+r).replace(/riot-/g,"")),t.value!==r){if(t.value=r,!o)return void(n.nodeValue=""+r);if(p(n,o),f(r))l(o,r,n,e);else if("if"==o){var s=t.stub,c=function(){u(s.parentNode,s,n)},d=function(){u(n.parentNode,n,s)};r?s&&(c(),n.inStub=!1,x(n)||b(n,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(s=t.stub=s||document.createTextNode(""),n.parentNode?d():(e.parent||e).one("updated",d),n.inStub=!0)}else if(/^(show|hide)$/.test(o))"hide"==o&&(r=!r),n.style.display=r?"":"none";else if("value"==o)n.value=r;else if(P(o,L)&&o!=N)r&&n.setAttribute(o.slice(L.length),r);else{if(t.bool&&(n[o]=r,!r))return;typeof r!==D&&n.setAttribute(o,r)}}})}function d(t,e){for(var i,n=0,o=(t||[]).length;o>n;n++)i=t[n],null!=i&&e(i,n)===!1&&n--;return t}function f(t){return typeof t===O||!1}function p(t,e){t.removeAttribute(e)}function h(t){return t.tagName&&K[t.getAttribute(N)||t.tagName.toLowerCase()]}function m(t,e,i){var n,o=new s(t,{root:e,parent:i},e.innerHTML),r=g(e),a=v(i);return o.parent=a,n=a.tags[r],n?(H(n)||(a.tags[r]=[n]),~a.tags[r].indexOf(o)||a.tags[r].push(o)):a.tags[r]=o,e.innerHTML="",o}function v(t){for(var e=t;!h(e.root)&&e.parent;)e=e.parent;return e}function g(t){var e=h(t),i=t.getAttribute("name"),n=i&&i.indexOf(B(0))<0?i:e?e.name:t.tagName.toLowerCase();return n}function w(t){for(var e,i=arguments,n=1;n<i.length;++n)if(e=i[n])for(var o in e)t[o]=e[o];return t}function y(t){if(!(t instanceof s||t&&typeof t.trigger==O))return t;var e={};for(var i in t)~z.indexOf(i)||(e[i]=t[i]);return e}function b(t,e){if(t){if(e(t)===!1)return;for(t=t.firstChild;t;)b(t,e),t=t.nextSibling}}function _(t,e){for(var i,n=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;i=n.exec(t);)e(i[1].toLowerCase(),i[2]||i[3]||i[4])}function x(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function k(t){return document.createElement(t)}function T(t,e){return t.replace(/<(yield)\/?>(<\/\1>)?/gi,e||"")}function C(t,e){return(e||document).querySelectorAll(t)}function S(t,e){return(e||document).querySelector(t)}function I(t){function e(){}return e.prototype=t,new e}function $(t,e,i){if(!t._visited){var n,o=t.getAttribute("id")||t.getAttribute("name");o&&(i.indexOf(o)<0&&(n=e[o],n?H(n)?n.push(t):e[o]=[n,t]:e[o]=t),t._visited=!0)}}function P(t,e){return t.slice(0,e.length)===e}function M(t){if(!A.render){V||(V=k("style"),V.setAttribute("type","text/css"));var e=document.head||document.getElementsByTagName("head")[0];if(V.styleSheet?V.styleSheet.cssText+=t:V.innerHTML+=t,!V._rendered)if(V.styleSheet)document.body.appendChild(V);else{var i=S("style[type=riot]");i?(i.parentNode.insertBefore(V,i),i.parentNode.removeChild(i)):e.appendChild(V)}V._rendered=!0}}function E(t,e,i){var n=K[e],o=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",n&&t&&(n=new s(n,{root:t,opts:i},o)),n&&n.mount?(n.mount(),Y.push(n),n.on("unmount",function(){Y.splice(Y.indexOf(n),1)})):void 0}var A={version:"v2.2.4",settings:{}},j=0,L="riot-",N=L+"tag",F="string",D="object",W="undefined",O="function",q=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,z=["_item","_id","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],R=0|(t&&t.document||{}).documentMode,H=Array.isArray;A.observable=function(t){t=t||{};var e={},i=0;return t.on=function(n,o){return f(o)&&(typeof o.id===W&&(o._id=i++),n.replace(/\S+/g,function(t,i){(e[t]=e[t]||[]).push(o),o.typed=i>0})),t},t.off=function(i,n){return"*"==i?e={}:i.replace(/\S+/g,function(t){if(n)for(var i,o=e[t],r=0;i=o&&o[r];++r)i._id==n._id&&o.splice(r--,1);else e[t]=[]}),t},t.one=function(e,i){function n(){t.off(e,n),i.apply(t,arguments)}return t.on(e,n)},t.trigger=function(i){for(var n,o=[].slice.call(arguments,1),r=e[i]||[],a=0;n=r[a];++a)n.busy||(n.busy=1,n.apply(t,n.typed?[i].concat(o):o),r[a]!==n&&a--,n.busy=0);return e.all&&"all"!=i&&t.trigger.apply(t,["all",i].concat(o)),t},t},A.mixin=function(){var t={};return function(e,i){return i?void(t[e]=i):t[e]}}(),function(t,e,i){function n(){return s.href.split("#")[1]||""}function o(t){return t.split("/")}function r(t){t.type&&(t=n()),t!=a&&(l.trigger.apply(null,["H"].concat(o(t))),a=t)}if(i){var a,s=i.location,l=t.observable(),u=!1,c=t.route=function(t){t[0]?(s.hash=t,r(t)):l.on("H",t)};c.exec=function(t){t.apply(null,o(n()))},c.parser=function(t){o=t},c.stop=function(){u&&(i.removeEventListener?i.removeEventListener(e,r,!1):i.detachEvent("on"+e,r),l.off("*"),u=!1)},c.start=function(){u||(i.addEventListener?i.addEventListener(e,r,!1):i.attachEvent("on"+e,r),u=!0)},c.start()}}(A,"hashchange",t);var V,B=function(t){var e,i,n,o=/[{}]/g;return function(r){var a=A.settings.brackets||t;return e!==a&&(e=a,n=a.split(" "),i=n.map(function(t){return t.replace(/(?=.)/g,"\\")})),r instanceof RegExp?a===t?r:new RegExp(r.source.replace(o,function(t){return i[~~("}"===t)]}),r.global?"g":""):n[r]}}("{ }"),X=function(){function e(t,e){return t.indexOf(B(0))<0?(t=t.replace(/\n|\r\n?/g,"\n"),function(){return t}):(t=t.replace(B(/\\{/g),"￰").replace(B(/\\}/g),"￱"),e=o(t,r(t,B(/{/),B(/}/))),t=2!==e.length||e[0]?"["+e.map(function(t,e){return e%2?i(t,!0):'"'+t.replace(/\n|\r\n?/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':i(e[1]),new Function("d","return "+t.replace(/\uFFF0/g,B(0)).replace(/\uFFF1/g,B(1))+";"))}function i(t,e){return t=t.replace(/\n|\r\n?/g," ").replace(B(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(t)?"["+r(t,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(t){return t.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(t,e,i){return i.replace(/[^&|=!><]+/g,n)+'?"'+e+'":"",'})}).join("")+'].join(" ").trim()':n(t,e)}function n(t,e){return t=t.trim(),t?"(function(v){try{v="+t.replace(l,function(t,e,i){return i?'(("'+i+s+i+")":t})+"}catch(e){}return "+(e===!0?'!v&&v!==0?"":v':"v")+"}).call(d)":""}function o(t,e){var i=[];return e.map(function(e,n){n=t.indexOf(e),i.push(t.slice(0,n),e),t=t.slice(n+e.length)}),t&&i.push(t),i}function r(t,e,i){var n,o=0,r=[],a=new RegExp("("+e.source+")|("+i.source+")","g");return t.replace(a,function(e,i,a,s){!o&&i&&(n=s),o+=i?1:-1,o||null==a||r.push(t.slice(n,s+a.length))}),r}var a={},s='"in d?d:'+(t?"window).":"global)."),l=/(['"\/])(?:[^\\]*?|\\.|.)*?\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function\s*\()|([A-Za-z_$]\w*)/g;return function(t,i){return t&&(a[t]||(a[t]=e(t)))(i)}}(),U=function(t){function e(e){var r=e&&e.match(/^\s*<([-\w]+)/),a=r&&r[1].toLowerCase(),s=n[a]||o,l=k(s);return l.stub=!0,t&&a&&(r=a.match(q))?i(l,e,a,!!r[1]):l.innerHTML=e,l}function i(t,e,i,n){var r,a=k(o),s=n?"select>":"table>";a.innerHTML="<"+s+e+"</"+s,r=a.getElementsByTagName(i)[0],r&&t.appendChild(r)}var n={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},o="div";return t=t&&10>t,e}(R),Y=[],K={};A.tag=function(t,e,i,n,o){return f(n)&&(o=n,/^[\w\-]+\s?=/.test(i)?(n=i,i=""):n=""),i&&(f(i)?o=i:M(i)),K[t]={name:t,tmpl:e,attrs:n,fn:o},t},A.mount=function(t,e,i){function n(t){var e="";return d(t,function(t){e+=", *["+N+'="'+t.trim()+'"]'}),e}function o(){var t=Object.keys(K);return t+n(t)}function r(t){var n;if(t.tagName){!e||(n=t.getAttribute(N))&&n==e||t.setAttribute(N,e);var o=E(t,e||t.getAttribute(N)||t.tagName.toLowerCase(),i);o&&l.push(o)}else t.length&&d(t,r)}var a,s,l=[];if(typeof e===D&&(i=e,e=0),typeof t===F?("*"===t?t=s=o():t+=n(t.split(",")),a=C(t)):a=t,"*"===e){if(e=s||o(),a.tagName)a=C(e,a);else{var u=[];d(a,function(t){u.push(C(e,t))}),a=u}e=0}return a.tagName?r(a):d(a,r),l},A.update=function(){return d(Y,function(t){t.update()})},A.mountTo=A.mount,A.util={brackets:B,tmpl:X},typeof exports===D?module.exports=A:"function"==typeof define&&define.amd?define(function(){return t.riot=A}):t.riot=A}("undefined"!=typeof window?window:void 0),function(t,e){function i(){T=P=C=S=I=$=F}function n(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}function o(t){return parseFloat(t)||0}function r(){E={top:e.pageYOffset,left:e.pageXOffset}}function a(){return e.pageXOffset!=E.left?(r(),void C()):void(e.pageYOffset!=E.top&&(r(),l()))}function s(t){setTimeout(function(){e.pageYOffset!=E.top&&(E.top=e.pageYOffset,l())},0)}function l(){for(var t=j.length-1;t>=0;t--)u(j[t])}function u(t){if(t.inited){var e=E.top<=t.limit.start?0:E.top>=t.limit.end?2:1;t.mode!=e&&m(t,e)}}function c(){for(var t=j.length-1;t>=0;t--)if(j[t].inited){var e=Math.abs(y(j[t].clone)-j[t].docOffsetTop),i=Math.abs(j[t].parent.node.offsetHeight-j[t].parent.height);if(e>=2||i>=2)return!1}return!0}function d(t){isNaN(parseFloat(t.computed.top))||t.isCell||(t.inited=!0,t.clone||v(t),"absolute"!=t.parent.computed.position&&"relative"!=t.parent.computed.position&&(t.parent.node.style.position="relative"),u(t),t.parent.height=t.parent.node.offsetHeight,t.docOffsetTop=y(t.clone))}function f(t){var e=!0;t.clone&&g(t),n(t.node.style,t.css);for(var i=j.length-1;i>=0;i--)if(j[i].node!==t.node&&j[i].parent.node===t.parent.node){e=!1;break}e&&(t.parent.node.style.position=t.parent.css.position),t.mode=-1}function p(){for(var t=j.length-1;t>=0;t--)d(j[t])}function h(){for(var t=j.length-1;t>=0;t--)f(j[t])}function m(t,e){var i=t.node.style;switch(e){case 0:i.position="absolute",i.left=t.offset.left+"px",i.right=t.offset.right+"px",i.top=t.offset.top+"px",i.bottom="auto",i.width="auto",i.marginLeft=0,i.marginRight=0,i.marginTop=0;break;case 1:i.position="fixed",i.left=t.box.left+"px",i.right=t.box.right+"px",i.top=t.css.top,i.bottom="auto",i.width="auto",i.marginLeft=0,i.marginRight=0,i.marginTop=0;break;case 2:i.position="absolute",i.left=t.offset.left+"px",i.right=t.offset.right+"px",i.top="auto",i.bottom=0,i.width="auto",i.marginLeft=0,i.marginRight=0}t.mode=e}function v(t){t.clone=document.createElement("div");var e=t.node.nextSibling||t.node,i=t.clone.style;i.height=t.height+"px",i.width=t.width+"px",i.marginTop=t.computed.marginTop,i.marginBottom=t.computed.marginBottom,i.marginLeft=t.computed.marginLeft,i.marginRight=t.computed.marginRight,i.padding=i.border=i.borderSpacing=0,i.fontSize="1em",i.position="static",i.cssFloat=t.computed.cssFloat,t.node.parentNode.insertBefore(t.clone,e)}function g(t){t.clone.parentNode.removeChild(t.clone),t.clone=void 0}function w(t){var e=getComputedStyle(t),i=t.parentNode,n=getComputedStyle(i),r=t.style.position;t.style.position="relative";var a={top:e.top,marginTop:e.marginTop,marginBottom:e.marginBottom,marginLeft:e.marginLeft,marginRight:e.marginRight,cssFloat:e.cssFloat},s={top:o(e.top),marginBottom:o(e.marginBottom),paddingLeft:o(e.paddingLeft),paddingRight:o(e.paddingRight),borderLeftWidth:o(e.borderLeftWidth),borderRightWidth:o(e.borderRightWidth)};t.style.position=r;var l={position:t.style.position,top:t.style.top,bottom:t.style.bottom,left:t.style.left,right:t.style.right,width:t.style.width,marginTop:t.style.marginTop,marginLeft:t.style.marginLeft,marginRight:t.style.marginRight},u=b(t),c=b(i),d={node:i,css:{position:i.style.position},computed:{position:n.position},numeric:{borderLeftWidth:o(n.borderLeftWidth),borderRightWidth:o(n.borderRightWidth),borderTopWidth:o(n.borderTopWidth),borderBottomWidth:o(n.borderBottomWidth)}},f={node:t,box:{left:u.win.left,right:N.clientWidth-u.win.right},offset:{top:u.win.top-c.win.top-d.numeric.borderTopWidth,left:u.win.left-c.win.left-d.numeric.borderLeftWidth,right:-u.win.right+c.win.right-d.numeric.borderRightWidth},css:l,isCell:"table-cell"==e.display,computed:a,numeric:s,width:u.win.right-u.win.left,height:u.win.bottom-u.win.top,mode:-1,inited:!1,parent:d,limit:{start:u.doc.top-s.top,end:c.doc.top+i.offsetHeight-d.numeric.borderBottomWidth-t.offsetHeight-s.top-s.marginBottom}};return f}function y(t){for(var e=0;t;)e+=t.offsetTop,t=t.offsetParent;return e}function b(t){var i=t.getBoundingClientRect();return{doc:{top:i.top+e.pageYOffset,left:i.left+e.pageXOffset},win:i}}function _(){A=setInterval(function(){!c()&&C()},500)}function x(){clearInterval(A)}function k(){L&&(document[D]?x():_())}function T(){L||(r(),p(),e.addEventListener("scroll",a),e.addEventListener("wheel",s),e.addEventListener("resize",C),e.addEventListener("orientationchange",C),t.addEventListener(W,k),_(),L=!0)}function C(){if(L){h();for(var t=j.length-1;t>=0;t--)j[t]=w(j[t].node);p()}}function S(){e.removeEventListener("scroll",a),e.removeEventListener("wheel",s),e.removeEventListener("resize",C),e.removeEventListener("orientationchange",C),t.removeEventListener(W,k),x(),L=!1}function I(){S(),h()}function $(){for(I();j.length;)j.pop()}function P(t){for(var e=j.length-1;e>=0;e--)if(j[e].node===t)return;var i=w(t);j.push(i),L?d(i):T()}function M(t){for(var e=j.length-1;e>=0;e--)j[e].node===t&&(f(j[e]),j.splice(e,1))}var E,A,j=[],L=!1,N=t.documentElement,F=function(){},D="hidden",W="visibilitychange";void 0!==t.webkitHidden&&(D="webkitHidden",W="webkitvisibilitychange"),e.getComputedStyle||i();for(var O=["","-webkit-","-moz-","-ms-"],q=document.createElement("div"),z=O.length-1;z>=0;z--){try{q.style.position=O[z]+"sticky"}catch(R){}""!=q.style.position&&i()}r(),e.Stickyfill={stickies:j,add:P,remove:M,init:T,rebuild:C,pause:S,stop:I,kill:$}}(document,window),window.jQuery&&!function(t){t.fn.Stickyfill=function(t){return this.each(function(){Stickyfill.add(this)}),this}}(window.jQuery),riot.tag("add-to-cart",'<span class="{ btn__added:true, btn__added--show: isadded }">{ text }</span> <yield></yield>','onclick="{ add }"',function(t){var e=this;e.isadded=!1,e.text="В корзине",this.add=function(i){if(e.isadded&&(window.location.href="/cart/"),!e.isadded){var n,o=e.text;e.variant=t.variant||null,e.qty=t.qty||1,e.text="Добавлено",cartStorage.update(t.id,e.qty,e.variant),n=setTimeout(function(){e.text=o,clearTimeout(n),e.update()},2e3)}e.isadded=!0}.bind(this),cartStorage.on("update",function(){var i=this.offers.filter(function(e){return t.id==e.id});e.isadded=i.length?!0:!1,e.update()})}),riot.tag("quick-buy","<yield></yield>",'onclick="{ buy }"',function(t){this.buy=function(e){content={tag:"modal-offer",offer_id:t.id},window.modalWindow.open(content)}.bind(this)}),riot.tag("offer-form",' <div class="offer__count" if="{ variants.length }"> <div class="offer__field-label">Модель</div> <select name="variant" class="control__count" onchange="{ setVariant }"> <option each="{ variant in variants }" value="{ variant.id }" __disabled="{ !variant.count }" __selected="{ variant.id == choosedVariant ? selected : false }">{ variant.name }</option> </select> </div> <div class="offer__buttons"> <button riot-tag="add-to-cart" id="{ opts.offer_id }" variant="{ choosedVariant }" qty="{ quantity }" class="btn btn--large"><span class="btn__text"><i class="icon-16 icon--cart-white"></i>В корзину</span></button> <button riot-tag="quick-buy" id="{ opts.offer_id }" class="btn btn--grey btn--large"><span class="btn__text">Купить сейчас</span></button> </div>',function(t){var e=this;e.quantity=1,this.send=function(t){console.log("send")}.bind(this),this.setVariant=function(t){e.choosedVariant=t.target.value}.bind(this),this.decrease=function(t){e.quantity>1&&e.quantity--}.bind(this),this.increase=function(t){e.quantity++}.bind(this),e.on("mount",function(){t.hasvariants&&$.ajax({method:"post",dataType:"json",url:"/cart/api/"+t.offer_id+"/",success:function(t){e.variants=t.variants,e.choosedVariant=e.variants[0],e.update()}})})}),riot.tag("modal-window",'<div class="modal {modal--hide: !opened}"> <div class="modal__hider" onclick="{ close }"></div> <div class="modal__window { modal__window--hide: !showed }"> <div class="modal__window-wrapper"> <span class="modal__window-close" onclick="{ close }"></span> <div id="mounter"></div> </div> </div> </div>',function(t){function e(){setTimeout(function(){n.showed=!0,i(),n.modal.trigger("open"),$(window).on("resize",i),n.update()},5)}function i(){var t=setTimeout(function(){var e=$(".modal__window",n.root),i=e.height(),o=e.width(),r=Math.round(i/2),a=Math.round(o/2);e.css({margin:"-"+r+"px 0 0 -"+a+"px"}),clearTimeout(t)},0)}var n=this;n.on("mount",function(){var t;n.modal=modalWindow,n.opened=n.modal.opened||!1,n.showed=n.modal.opened||!1,n.modal.on("update",function(){n.opened=n.modal.opened,n.content=n.modal.content,n.opened&&n.content&&(t=riot.mountTo(n.mounter,n.content.tag,n.content)[0],e()),n.update()}),n.update()}),this.close=function(){n.modal.close(),n.showed=!1,$(window).off("resize",i),n.update()}.bind(this)}),riot.tag("modal-offer",'<div class="modal-offer"> <div class="modal-offer__info"> <div class="modal-offer__info-badges" if="{ !!offer.oldprice }"> <span class="badge-special">Акция</span> </div> <div class="modal-offer__category"><a href="{ offer.category.url }" class="link-plain link-grey text-small">{ offer.category.name }</a></div> <h2 class="modal-offer__name"><a href="{ offer.url }" class="link-plain">{ offer.name }</a></h2> <div class="modal-offer__image"> <a href="{ offer.url }" class="link-plain"><img riot-src="{ offer.picture }" alt="{ offer.name }" title="{ offer.name }"></a> <div class="modal-offer__countdown" if="{ offer.timer }"> <div id="countdown" class="countdown"></div> </div> </div> <div class="modal-offer__price { modal-offer__price--special: !!offer.oldprice }"><span if="{ offer.oldprice }">{ offer.oldprice }</span>{ offer.price } руб.</div> </div> <div class="modal-offer__form"> <div class="modal-offer__loading" if="{ loading }"> <div class="modal-offer__loading-spinner text-center"> <div class="spinner spinner--big"><span><span></span></span></div> <p>Оформляем заказ</p> </div> </div> <div class="modal-offer__form-line"> <label class="text-small">Количество</label> <span class="control__count"><span onclick="{ decrease }" class="{btn: true, btn--outline: true, btn--iconed: true, btn--icon-minus: true, control__count-minus:true, btn--dissabled: count == 1 }"></span><input type="text" class="input control__count-input" disabled value="{ count }"><span onclick="{ increase }" class="btn btn--outline btn--iconed btn--icon-plus control__count-plus"></span></span> </div> <div class="modal-offer__form-line" if="{ offer.variants.length }"> <label class="text-small">Модель</label> <select name="variant" class="control__count" style="width: 100%;" onchange="{ setVariant }"> <option each="{ variant in offer.variants }" value="{ variant.id }" __disabled="{ !variant.count }" __selected="{ variant.id == choosedVariant ? selected : false }">{ variant.name }</option> </select> </div> <div class="modal-offer__form-line {modal-offer__form-line--error: errors}"> <label class="text-small">Телефон</label> <input type="text" name="phone" placeholder="7 (495) 123-4567" class="input" id="phone"> </div> <div class="modal-offer__form-button"> <input type="submit" onclick="{ postOrder }" value="Оформить заказ" class="btn btn--large"> </div> </div> </div>',function(t){function e(){var t=n.test(i.phone.value);return i.errors=!t,t}var i=this,n=/^[78]{1}\s\([0-9]{3}\)\s[0-9]{3}[-]{1}[0-9]{4}$/;i.offer_id=t.offer_id,i.count=1,i.offer={},i.loading=!1,i.errors=!1,this.decrease=function(){i.count>1&&i.count--}.bind(this),this.increase=function(){i.count++}.bind(this),this.setVariant=function(t){i.choosedVariant=t.target.value}.bind(this),this.postOrder=function(){return e()?(i.loading=!0,void $.ajax({method:"post",dataType:"json",url:"/cart/api/q/",data:{count:i.count,offer_id:i.offer_id,variant:i.choosedVariant?i.choosedVariant.id:void 0,phone:i.phone.value},success:function(t){t.errors&&(i.loading=!1,i.update(),alert("Произошла ошибка")),t.order.order_id&&(window.location.href=t.order.url)}})):void $(i.phone).on("keyup",e)}.bind(this),this.on("mount",function(){$(i.phone).mask("9 (999) 999-9999"),$.ajax({method:"get",dataType:"json",url:"/cart/api/q/"+i.offer_id+"/",success:function(t){i.offer=t.offer,i.choosedVariant=i.offer.variants[0],i.offer.timer&&$(i.countdown).countdown(i.offer.timer,function(t){var e=24*t.offset.totalDays+t.offset.hours;$(this).html(t.strftime(e+":%M:%S"))}),i.offer.user&&i.offer.user.phone&&(i.phone.value=i.offer.user.phone),i.update()}})})}),riot.tag("offer-delivery","<yield></yield>",function(t){function e(e){$.ajax({type:"post",dataType:"json",url:"/cart/api/d/paydel/",data:{region_id:e.id,aid:t.aid},success:function(t){i(t.data,e)}})}function i(t,e){if(n.link.text(e.text),n.list.html(""),t.length)t.forEach(function(t){var e=n.litpl.clone();e.find(".offer__deliveries-method").text(t.method+":"),e.find(".offer__deliveries-price").text("от "+t.price+" руб."),n.list.append(e)});else{var i=n.litpl.clone();i.find(".offer__deliveries-method").text("Уточняйте у оператора"),n.list.append(i)}n.update()}var n=this;n.current_region=t.current_region,this.select=function(t){n.current_region=t.id,e(t)}.bind(this),n.on("mount",function(){n.el=$(n.root),n.link=n.el.find(".pseudo"),n.list=n.el.find(".offer__deliveries-list"),n.litpl=$('<li class="offer__deliveries-item"><div class="offer__deliveries-method"></div><span class="offer__deliveries-price"></span></li>'),n.link.on("click",function(){window.modalWindow.open({tag:"modal-delivery",current_region:n.current_region,parent:n})})})}),riot.tag("modal-delivery",'<div class="modal-delivery"> <div class="modal-delivery__search"><input type="text" class="input" name="searchinp" oninput="{ search }" placeholder="Введите название города"></div> <ul class="modal-delivery__founded"> <li class="modal-delivery__founded-error" if="{ !regions.length }">Городов не найдено</li> <li class="modal-delivery__founded-item" onclick="{ choose }" each="{ region in regions }" region_id="{ region.id }">{ region.text }</li> </ul> </div>',function(t){
function e(t){var t=t||"";$.ajax({type:"post",dataType:"json",url:"/cart/api/d/regions/",data:{q:t},success:function(t){n.regions=t.regions,n.update()}})}var i,n=this;n.regions=[],this.choose=function(e){t.current_region!=e.item.region.id&&t.parent.select(e.item.region),window.modalWindow.close()}.bind(this),this.search=function(t){var n=t.target.value;n.length>=2&&(clearTimeout(i),i=setTimeout(function(){e(t.target.value)},500))}.bind(this),n.on("mount",function(){e(),window.modalWindow.on("open",function(){n.searchinp.focus()})})}),riot.tag("offer-articul",'<div class="offer__articul" if="{ articul }">Артикул: <strong>#{ articul }</strong></div>',function(t){var e=this;e.on("mount",function(){$.ajax({type:"post",dataType:"json",url:"/cart/api/aul/",data:{offer_id:t.offer_id},success:function(t){e.articul=t.articul,e.update()}})})}),riot.tag("cart",'<div class="cart-page__loading" if="{ loading }"> <div class="cart-page__spinner text-center"> <div class="spinner spinner--big"><span><span></span></span></div> <p>Оформляем заказ</p> </div> </div> <div if="{ !offers.length }"> <p>В корзине пока нет товаров. Возможно вы захотите добавить эти:</p> <br > </div> <ul class="cart-offers" if="{ offers.length }"> <li each="{ offer, idx in offers }" idx="{ idx }" offer="{ offer }" class="cart-offers__item" riot-tag="cart-item"></li> </ul> <cart-form if="{ offers.length }" total="{ cartStorage.total }" userinfo="{ userinfo }"></cart-form> <cart-related></cart-related>',function(t){var e=this;e.loading=!1,cartStorage.on("update",function(){e.offers=cartStorage.offers,e.userinfo||cartStorage.userinfo=={}||(e.userinfo=cartStorage.userinfo),e.update()})}),riot.tag("cart-item",'<div class="cart-offers__item-picture"> <a href="{ opts.offer.url }" class="link-plain"><img riot-src="{ opts.offer.image }" alt="{ opts.offer.name }" title="{ opts.offer.name }" class="cart-offers__item-image"></a> </div> <div class="cart-offers__item-title"> <a href="{ opts.offer.url }">{ opts.offer.name } { opts.offer.variant.name.toLowerCase() }</a> </div> <div class="cart-offers__item-price {cart-offers__item-price--special: !!opts.offer.oldprice}"> <span if="{ opts.offer.oldprice }">{ opts.offer.oldprice } руб.</span> {{ opts.offer.price }} руб. </div> <div class="cart-offers__item-count"> <span class="{ control__count: true }"><span onclick="{ decrease }" class="{btn: true, btn--outline: true, btn--iconed: true, btn--icon-minus: true, control__count-minus:true, btn--dissabled: opts.offer.quantity == 1 }"></span><input type="text" class="input control__count-input" disabled value="{ opts.offer.quantity }"><span onclick="{ increase }" class="btn btn--outline btn--iconed btn--icon-plus control__count-plus"></span></span> </div> <div class="cart-offers__item-total"> { sum } руб.  </div> <div class="cart-offers__item-delete"> <a href="" class="icon icon-16 icon--delete link-plain cart-offers__item-remove" onclick="{ remove }"></a> </div>',function(t){var e=this;this.remove=function(t){e.cartUpdate(0,remove=!0)}.bind(this),this.decrease=function(i){t.offer.quantity>1&&(t.offer.quantity--,e.cartUpdate(-1))}.bind(this),this.increase=function(i){t.offer.quantity++,e.cartUpdate(1)}.bind(this),this.cartUpdate=function(e,i){var i=i||!1,e=e||1;cartStorage.update(t.offer.id,e,t.offer.variant?t.offer.variant.id:null,i=i)}.bind(this),e.on("update",function(){e.sum=smartRound(t.offer.quantity*t.offer.price)})}),riot.tag("cart-related",'<div class="row--margin" if="{ len }"> <p class="h2-header"> Так же покупают <span class="cart-related__refresh" onclick="{ reload }" if="{ len >= 4 }">Показать другие</span> </p> <ul class="blocks-4 offers"> <li class="offers__item" each="{ offer in offers }"> <div class="offers__item-top"> <div class="offers__item-wrapper"> <div class="offers__item-picture"> <a href="{ offer.url }" class="link-plain"> <img riot-src="{ offer.picture }" alt="{ offer.name }" title="{ offer.name }"> </a> </div> <div class="offers__item-badges" if="{ offer.oldprice }"> <span class="badge-special">Акция</span><br> </div> <div class="offers__item-favorite {offers__item-favorite--added: offer.favorited}" oid="{ offer.id }" onclick="{ toggle }"> <span class="favorite-icon"><i class="icon-16 icon--heart-grey"></i></span> </div>  </div> </div> <div class="offers__item-info text-center"> <div class="offers__item-category"><a href="{ offer.category.url }" class="link-plain link-grey text-small">{ offer.category.name }</a></div> <div class="offers__item-name"><a href="{ offer.url }" class="offers__item-name__link">{ offer.name }</a></div> <div class="offers__item-price { offers__item-price--special: !!offer.oldprice }"><span class="offers__item-oldprice" if="{ offer.oldprice }">{ offer.oldprice }</span>{ offer.price } руб.</div> <div class="offers__item-buttons"> <button id="{ offer.id }" onclick="{ add }" class="btn"><span class="btn__text"><i class="icon-16 icon--cart-white"></i>Добавить</span></button> </div> <div class="offers__item-countdown" if="{ offer.timer }"> <span class="badge-special offers__item-countdown__until">До конца акции</span> <div class="countdown" id="countdown"></div> </div> </div> </li> </ul> </div>','class="cart-related"',function(t){function e(){$.ajax({type:"get",dataType:"json",url:"/cart/api/r/",success:function(t){i.offers=t.offers,i.len=i.offers.length>0?i.offers.length:!1,i.update()}})}var i=this;i.offers=[],i.len=!0,this.add=function(t){var i=void 0!=$(t.target).parent().attr("id")?$(t.target).parent():$(t.target),n=i.attr("id");cartStorage.update(n,1,null),e()}.bind(this),this.toggle=function(t){for(var e=$(t.target).parent().parent(),n=e.attr("oid"),o=0;o<i.offers.length;o++)i.offers[o].id==n&&(i.offers[o].favorited=!i.offers[o].favorited);favoriteStorage.update(n),i.update()}.bind(this),this.reload=function(){e()}.bind(this),i.on("mount",function(){e()})}),riot.tag("cart-form",'<div class="order-form"> <form action="" class="row" method="post" id="orderForm"> <div class="col-8"> <div class="order-form__wrapper"> <h2 class="order-form__title">Оформление заказа</h2>  <div class="order-form__group"> <h3 class="order-form__group-title">Контактная информация</h3> <div class="{ order-form__line:true, order-form__line--error: !!errors[\'fullname\'] }"> <label class="order-form__line-name order-form__line-name--required">ФИО</label> <div class="order-form__line-input"> <input type="text" name="fullname" onkeyup="{ edit }" class="input" placeholder="Иванов Федор Павлович"> <span class="order-form__line-error" if="{ errors[\'fullname\'] }" }>{ errors[\'fullname\'] }</span> </div> </div> <div class="{ order-form__line:true, order-form__line--error: !!errors[\'phone\'] }"> <label class="order-form__line-name order-form__line-name--required">Телефон</label> <div class="order-form__line-input"> <input type="text" name="phone" placeholder="7 (495) 123-4567" onkeyup="{ edit }" class="input" id="phone"> <span class="order-form__line-error" if="{ errors[\'phone\'] }">{{ errors[\'phone\'] }}</span> </div> </div> <div class="{ order-form__line:true, order-form__line--error: !!errors[\'email\'] }"> <label class="order-form__line-name">Электронная почта</label> <div class="order-form__line-input"> <input type="text" name="email" placeholder="ivanov.fedor@gmail.com" class="input" onkeyup="{ edit }"> <span class="order-form__line-error" if="{ errors[\'email\'] }">{{ errors[\'email\'] }}</span> </div> </div>  </div> <div class="order-form__group"> <h3 class="order-form__group-title">Информация о доставке, необязательно</h3> <p class="order-form__group-description">Доступные способы получения товара: курьерская доставка, самовывоз из пункта выдачи или доставка в отделение «Почты России». Способ доставки уточнит менеджер по телефону при подтверждении заказа.</p> <div class="order-form__line"> <label for="" class="order-form__line-name">Город</label> <div class="order-form__line-input" > <select style="width: 100%;" name="regions" onchange="{ look }" class="js-region-select"> <option value="" selected="selected">Не выбран</option> </select> </div> </div> <div class="order-form__line" if="{ selected_region && !!paydel.deliveries.length }"> <label for="" class="order-form__line-name">Тип доставки</label> <div class="order-form__line-input"> <select name="delivery_method" onchange="{ cart_info }"> <option each="{ delivery, idx in paydel.deliveries }" value="{ delivery.id }" __selected="{ idx == \'0\' }">{ delivery.name }</option> </select> </div> </div> <div class="order-form__line"> <label for="" class="order-form__line-name">Адрес доставки</label> <div class="order-form__line-input"> <textarea name="address" id="" rows="2" onkeyup="{ edit }" placeholder="Например: 3-й дегтярный переулок, дом 7"></textarea> </div> </div> <div class="order-form__line" if="{ selected_region && !!paydel.payments.length }"> <label for="" class="order-form__line-name">Метод оплаты</label> <div class="order-form__line-input"> <select name="payment_method" onchange="{ cart_info }"> <option each="{ payment, idx in paydel.payments }" value="{ payment.id }" __selected="{ idx == \'0\' }">{ payment.name }</option> </select> </div> </div> <div class="order-form__line"> <label for="" class="order-form__line-name">Комментарий</label> <div class="order-form__line-input"> <textarea name="comment" id="" rows="5" onkeyup="{ edit }" placeholder="Например: звоните с 9 до 12 утра"></textarea> </div> </div> </div> </div> </div> <div class="col-4 js-sticky"> <div class="order-form__right"> <div class="order-form__total">Сумма: <div class="order-form__total-price">{ opts.total.sum } руб.</div> <p if="{ delivery_info.delivery_price }">Доставка:<br ><b>{ delivery_info.delivery_price } руб.</b></p> <p if="{ delivery_info.order_sum }">Итого с доставкой:<br ><b>{ delivery_info.order_sum } руб.</b></p> </div>  <input type="submit" onclick="{ postOrder }" value="Оформить заказ" class="btn btn--large" __disabled="{ !validated }"> </div> </div> </form> </div>',function(t){function e(){o.selected_region&&o.payment_method.value&&o.delivery_method.value?$.ajax({type:"post",dataType:"json",data:{region_id:o.selected_region,payment_method:o.payment_method.value,delivery_method:o.delivery_method.value},url:"/cart/api/d/check/",success:function(t){return t.error?void(o.delivery_info={}):(o.delivery_info=t.data,o.update(),void Stickyfill.rebuild())}}):(o.delivery_info={},o.update())}function i(t){var i={region_id:t};(0===t||t)&&$.ajax({type:"post",dataType:"json",data:i,url:"/cart/api/d/paydel/",success:function(t){return t.data.deliveries&&t.data.deliveries.length||t.data.payments&&t.data.payments.length?(o.paydel=t.data,o.update(),void e()):(o.paydel={},o.delivery_info={},void o.update())}})}var n,o=this,r={fullname:function(t){var t=t||"",e="Обязательно и не менее 3 символов";return{test:!!t.length&&t.length>=3,msg:e}},phone:function(t){var t=t||"",e="Обязательно в формате 7 (123) 456-7890";return re=/^[78]{1}\s\([0-9]{3}\)\s[0-9]{3}[-]{1}[0-9]{4}$/,{test:re.test(t),msg:e}},email:function(t){var e,i="Неправильный формат электронной почты",n=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return e=t&&""!=t?n.test(t):!0,{test:e,msg:i}}};o.validated=!1,o.values={},o.errors={},o.userinfo=t.userinfo||{},o.selected_region=null,o.paydel={},o.delivery_info={},this.edit=function(t){o.values[t.target.name]=t.target.value,o.validate()}.bind(this),this.look=function(t){o.selected_region=t.target.value||0,i(o.selected_region)}.bind(this),this.cart_info=function(t){e()}.bind(this),this.validate=function(){var t=[];for(key in r){var e,i=r[key];i&&(e=i(o.values[key]),o.errors[key]=e.test?"":e.msg,t.push(e.test))}o.validated=t.every(Boolean)}.bind(this),this.postOrder=function(){var t=$.extend({},o.values,{payment:o.payment_method.value,delivery:o.delivery_method.value});o.delivery_info!={}&&(t.delivery_info=o.delivery_info),o.parent.loading=!0,o.parent.update(),$.ajax({type:"post",dataType:"json",data:t,url:"/order/",success:function(t){return t.error?(o.parent.loading=!1,o.parent.update(),void alert(t.error)):void(window.location.href=t.backurl)}})}.bind(this),o.on("mount",function(){if($(o.phone).mask("9 (999) 999-9999"),o.sticky=$(".js-sticky").Stickyfill(),t.userinfo){o.values=t.userinfo;for(key in o.values)o[key]&&(o[key].value=o.values[key]);var e=o.values.region||!1;e&&e.id&&e.name&&($(o.regions).find("option:selected").val(e.id).text(e.name),o.selected_region=e.id),o.validate(),o.update()}$(".js-region-select").select2({ajax:{url:"/cart/api/d/regions/",dataType:"json",type:"post",delay:250,data:function(t){return{q:t.term,page:t.page}},processResults:function(t,e){return{results:t.regions}},cache:!0},escapeMarkup:function(t){return t},minimumInputLength:2,searching:function(){return"Поиск…"}}),cartStorage.on("update",function(){clearTimeout(n),this.offers.length&&(n=setTimeout(function(){i(o.selected_region),clearTimeout(n)},1e3))})})}),riot.tag("minified-cart",'<a href="{{ opts.url }}" class="{ link-plain: true, link-active: opts.active }"> <span class="{ header__iconed-left:true, header__iconed-left--added: added && total.quantity }"> <i class="icon-32 icon--cart"></i> <span class="header__cart-count" if="{ total.quantity }">{ total.quantity }</span> </span> <span class="header__iconed-right"> Моя корзина<br > <span class="{ text-small: true, text-grey: !total.quantity }">{ message }&nbsp;</span> </span> </a>','class="{header__iconed: true}"',function(t){var e=this;e.timer=null,e.firstUpdate=!0,this.plural=function(t,e){if(!(e.length<3)){var i;return i=t%10==1&&t%100!=11?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2,t+" "+e[i]}}.bind(this),e.on("mount",function(){e.added=!1}),cartStorage.on("update",function(){e.total=cartStorage.total,e.message=e.total.quantity?e.plural(e.total.quantity,["товар","товара","товаров"])+" на "+e.total.sum+" руб.":"пока пуста",e.firstUpdate||(clearTimeout(e.timer),e.added=!0,e.timer=setTimeout(function(){e.added=!1,e.update()},200)),e.firstUpdate=!1,e.update()})}),riot.tag("favorite",'<div class="offers__item-favorite {offers__item-favorite--added: favorited}" onclick="{ toggle }"> <span class="favorite-icon"><i class="icon-16 icon--heart-grey"></i></span> </div>',function(t){var e=this;e.id=e.opts.oid,e.favorited=1==e.opts.favorited||"true"==e.opts.favorited||!1,this.toggle=function(t){e.favorited=!e.favorited,favoriteStorage.update(e.id)}.bind(this),favoriteStorage.on("update",function(){var t=-1!=this.favorites.indexOf(e.id);t&&!e.favorited?(e.favorited=!0,e.update()):!t&&e.favorited&&(e.favorited=!1,e.update())})}),riot.tag("favorites","<span> <yield></yield> </span>",function(t){var e=this;favoriteStorage.on("update",function(){e.root.innerHTML=this.favorites.length||0})}),riot.tag("order-upsale",'<div class="order__upsale" if="{ offers }"> <h2 class="order__upsale-header">Добавьте к заказу</h2> <div class="order__upsale-timer"><span id="timeto"></span></div> <ul class="blocks-3 offers order__offers"> <li class="offers__item" riot-tag="order-upsale-item" each="{ offer in offers }"></li> </ul> </div>',function(t){function e(t,e){if(!(e.length<3)){var i;return i=t%10==1&&t%100!=11?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2,e[i]}}var i=this;i.offerTPL=$(".cart-offers .cart-offers__item").first(),this.fetch=function(){$.ajax({type:"get",dataType:"json",url:"/order/"+i.order_id+"/api/upsale/",success:function(t){i.offers=t.offers,i.update()}})}.bind(this),i.on("mount",function(){i.order_id=t.order_id,$(document).ready(function(){i.timer_to="False"!==t.timer_to?t.timer_to:!1,i.timer_to&&$(i.timeto).countdown(i.timer_to,function(t){var i=e(t.offset.seconds,["секунда","секунды","секунд"]),n=e(t.offset.minutes,["минута","минуты","минут"]),o="%-M "+n+" %-S "+i;t.offset.minutes<=0&&(o="%-S "+i),$(this).html("Осталось "+t.strftime(o))}).on("finish.countdown",function(){$(i.root).slideUp(500,function(){this.remove()})})}),i.fetch()})}),riot.tag("order-upsale-item",'<li> <div class="offers__item-top"> <div class="offers__item-wrapper"> <div class="offers__item-picture"> <a href="{ offer.url }" class="link-plain"> <img riot-src="{ offer.picture }" alt="{ offer.name }" title="{ offer.name }"> </a> </div> <div class="offers__item-badges" if="{ offer.oldprice }"> <span class="badge-special">Акция</span><br> </div> </div> </div> <div class="offers__item-info text-center"> <div class="offers__item-category"><a href="{ offer.category.url }" class="link-plain link-grey text-small">{ offer.category.name }</a></div> <div class="offers__item-name"><a href="{ offer.url }" class="offers__item-name__link">{ offer.name }</a></div> <div class="offers__item-price { offers__item-price--special: !!offer.oldprice }"><span class="offers__item-oldprice" if="{ offer.oldprice }">{ offer.oldprice }</span>{ offer.price } руб.</div> <div class="offers__item-buttons"> <button id="{ offer.id }" onclick="{ add }" class="btn"><span class="btn__text"><i class="icon-16 icon--cart-white"></i>Добавить</span></button> </div> <div class="offers__item-countdown" if="{ offer.timer }"> <span class="badge-special offers__item-countdown__until">До конца акции</span> <div class="countdown" id="countdown"></div> </div> </div> </li>',function(t){function e(t){var e=i.parent.offerTPL.clone();return e.find(".cart-offers__item-picture a, .cart-offers__item-title a").attr("href",t.url),e.find(".cart-offers__item-picture img").attr("src",t.picture).attr("alt",t.name).attr("title",t.name),e.find(".cart-offers__item-title a").text(t.name),e.find(".cart-offers__item-price").text(t.price+" руб."),e.find(".cart-offers__item-quantity").text("X 1"),e.find(".cart-offers__item-total").text(t.price+" руб."),e}var i=this,n=$(".cart-offers");this.add=function(t){$.ajax({type:"post",dataType:"json",data:{offer_id:i.offer.id},url:"/order/"+i.parent.order_id+"/api/upsale/",success:function(t){var o=e(i.offer);o.appendTo(n),i.parent.fetch()}})}.bind(this)}),riot.tag("tabs",'<ul class="content__tabs"> <li class="content__tabs-item {\'content__tabs-item--active\': tab.active}" each="{tab in tabs}"><a href="" class="link-plain" onclick="{ activate }">{ tab.opts.heading }</a></li> </ul> <yield></yield>',function(t){var e=this;this.tabs=this.tags.tab;var i=function(){e.tabs.forEach(function(t){t.active=!1})};this.activate=function(t){var e=t.item.tab;i(),e.active=!0}.bind(this),this.on("activateByIdx",function(t){if(!(t>e.tabs.length-1)){var n=e.tabs[t];i(),n.active=!0,e.update()}}),window.thatOffer=this}),riot.tag("tab","<div class=\"content__text content__text--padding-20 {'content__text--hide': !active}\"> <yield></yield> </div>",function(t){this.route=t.route,this.active="true"==t.active}),riot.tag("comment-form",'<form action="post" onsubmit="{ submit }" enctype="multipart/form-data"> <div class="order-form__group order-form__group--comments"> <div class="cart-page__loading" if="{ sending }"> <div class="cart-page__spinner text-center"> <div class="spinner spinner--big"><span><span></span></span></div> <p>Отправляем отзыв</p> </div> </div> <div> <h3 class="order-form__group-title">Оставить отзыв</h3> <div class="order-form__line {order-form__line--error: !!errors[\'fullname\']}"> <label class="order-form__line-name">Имя</label> <div class="order-form__line-input order-form__line-input--short"> <input type="text" name="fullname" class="input" onblur="{ validateOne }" placeholder="Иванов Федор Павлович"> <span class="order-form__line-error">{ errors[\'fullname\'] }</span> </div> </div> <div class="order-form__line {order-form__line--error: !!errors[\'email\']}"> <label class="order-form__line-name">Электронная почта</label> <div class="order-form__line-input order-form__line-input--short"> <input type="text" name="email" class="input" onblur="{ validateOne }" placeholder="ivanov@fedor.pav"> <span class="order-form__line-error">{ errors[\'email\'] }</span> </div> </div> <div class="order-form__line"> <label class="order-form__line-name">Оценка</label> <div class="order-form__line-input order-form__line-rating-input"> <label for="rating_1"><input type="radio" name="rating" id="rating_1" value="1"><span>1</span></label> <label for="rating_2"><input type="radio" name="rating" id="rating_2" value="2"><span>2</span></label> <label for="rating_3"><input type="radio" name="rating" id="rating_3" value="3"><span>3</span></label> <label for="rating_4"><input type="radio" name="rating" id="rating_4" value="4"><span>4</span></label> <label for="rating_5"><input type="radio" name="rating" id="rating_5" value="5"><span>5</span></label> <label for="rating_6"><input type="radio" name="rating" id="rating_6" value="6"><span>6</span></label> <label for="rating_7"><input type="radio" name="rating" id="rating_7" value="7"><span>7</span></label> <label for="rating_8"><input type="radio" name="rating" id="rating_8" value="8"><span>8</span></label> <label for="rating_9"><input type="radio" name="rating" id="rating_9" value="9"><span>9</span></label> <label for="rating_10"><input type="radio" name="rating" id="rating_10" value="10"><span>10</span></label> </div> </div> <div class="order-form__line {order-form__line--error: !!errors[\'review\']}"> <label for="" class="order-form__line-name">Комментарий</label> <div class="order-form__line-input"> <textarea name="review" rows="4" onblur="{ validateOne }"></textarea> <span class="order-form__line-error">{ errors[\'review\'] }</span> </div> </div> <div class="order-form__line"> <div class="order-form__line-input"> <button class="btn btn--grey">Оставить отзыв</button> </div> </div> </div> <div class="cart-page__loading" if="{ sended }"> <div class="cart-page__spinner text-center"> <h1>Спасибо за отзыв</h1> <p>Ваш отзыв отправлен на модерацию. Можно&nbsp;<a href="" onclick="{ again }">оставить еще&nbsp;один</a></p> </div> </div> </div> </form>',function(t){function e(t){var e=t.serializeArray(),i={};return $.each(e,function(t){i[e[t].name]=e[t].value}),i}function i(t){var e=[];return $.each(t,function(i){e.push(n(i,t[i]))}),e.every(Boolean)}function n(t,e){if(void 0!==s[t]){var i=s[t](e);return a.errors[t]=i.test?"":i.msg,i.test}return!0}function o(e){a.sending=!0,e.offer_id=parseInt(t.offerid),$.ajax({method:"post",dataType:"json",url:"/reviews/",data:e,success:function(t){a.sending=!1,r(t),a.sended=!0,a.update()},error:function(){a.sending=!1,alert("Невозможно отправить отзыв, попробуйте позже"),a.update()}})}function r(t){a.form&&a.form[0].reset()}var a=this,s={fullname:function(t){var t=t||"",e="Обязательно и не менее 3 символов";return{test:!!t.length&&t.length>=3,msg:e}},review:function(t){var t=t||"",e="Обязательно и не менее 15 символов";return{test:!!t.length&&t.length>=15,msg:e}},email:function(t){var e,i="Неправильный формат электронной почты",n=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return e=n.test(t),{test:e,msg:i}}};a.userinfo=t.userinfo||{},a.errors={},this.again=function(t){a.sended=!1}.bind(this),this.validateOne=function(t){n(t.target.name,t.target.value)}.bind(this),this.submit=function(t){var n=e($(t.target));a.form=$(t.target),i(n)&&o(n)}.bind(this)}),function(t){t(".js-category-sort").on("change",function(){t(this).parent().submit()});var e=t("meta[name=csrf-token]").attr("content");t.ajaxSetup({beforeSend:function(t,i){/^(GET|HEAD|OPTIONS|TRACE)$/i.test(i.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",e)}}),function(e){function i(){function e(){i.total={quantity:0,sum:0},i.offers.forEach(function(t){i.total.quantity+=t.quantity,i.total.sum+=t.quantity*t.price}),i.total.sum=r(i.total.sum)}var i=riot.observable(this);i.offers=[],i.total={quantity:0,sum:0},i.userinfo={},i.set=function(t){i.offers=t,e(),i.trigger("update")},i.update=function(e,n,o,r){var r=1==r?!0:!1;t.ajax({method:"post",dataType:"json",url:"/cart/api/",data:{offer_id:e,quantity:n,variant_id:o,remove:r},success:function(t){i.set(t.offers)}})},i.fetch=function(){t.ajax({method:"post",dataType:"json",url:"/cart/api/",success:function(t){i.userinfo=t.userinfo;for(var e in i.userinfo)localStorage.getItem(e)||localStorage.setItem(e,i.userinfo[e]);i.set(t.offers)}})}}function n(){function e(e){t.ajax({method:"post",dataType:"json",url:"/favorites/",data:{offer_id:e},success:function(t){i.favorites=t.favorites,i.trigger("update")}})}var i=riot.observable(this);i.favorites=[],i.fetch=function(){e()},i.update=function(t){e(t)}}function o(){function e(){var e=t("body").css("overflow-y");t("body").css({"overflow-y":"hidden"==e?"auto":"hidden"})}var i=riot.observable(this);i.opened=!1,i.open=function(t){i.opened=!0,i.content=t,e(),i.trigger("update")},i.close=function(){i.opened=!1,i.content=null,e(),i.trigger("update")}}function r(t){var e=t.toString().split(".");return e.length>1?parseFloat(t.toFixed(2)):parseInt(t)}e.cartStorage=new i,e.cartStorage.fetch(),e.smartRound=r,e.favoriteStorage=new n,e.favoriteStorage.fetch(),e.modalWindow=new o}(window);riot.mount("cart");riot.mount("add-to-cart"),riot.mount("quick-buy"),riot.mount("minified-cart"),riot.mount("offer-form"),riot.mount("offer-delivery"),riot.mount("offer-articul"),riot.mount("order-upsale"),riot.mount("tabs"),riot.mount("favorite"),riot.mount("favorites"),riot.mount("modal-window"),t(".js-offers-special").owlCarousel({items:3,itemsCustom:[[0,1],[400,2],[700,3],[1e3,3],[1240,4],[1600,4]],navigation:!0,navigationText:!1,scrollPerPage:!0,rewindNav:!1}),t(".js-offers-four").owlCarousel({items:4,itemsCustom:[[0,1],[400,2],[700,4],[1e3,4],[1240,4],[1600,4]],navigation:!0,navigationText:!1,scrollPerPage:!0,rewindNav:!1}),t(".js-offers-visited").owlCarousel({items:4,navigation:!0,navigationText:!1,scrollPerPage:!0,rewindNav:!1}),t("[data-countdown]").each(function(){var e=t(this),i=t(this).data("countdown");e.countdown(i,function(t){var i=24*t.offset.totalDays+t.offset.hours;e.html(t.strftime(i+":%M:%S"))})}),t(".js-sticky").Stickyfill(),t(".offer__text").on("click",function(e){e.preventDefault();var i=t("[riot-tag=tabs]");window.thatOffer.trigger("activateByIdx",0),t("html, body").animate({scrollTop:i.offset().top-30},300)}),t(".offer__reviews a").on("click",function(e){e.preventDefault();var i=t("[riot-tag=tabs]");window.thatOffer.trigger("activateByIdx",1),t("html, body").animate({scrollTop:i.offset().top-30},300)});var i=t(".subscribe");if(i.length){var n=i.find("form");n.on("submit",function(e){function o(e){var i={},n=e.serializeArray();return t.each(n,function(t,e){i[e.name]=e.value}),i}e.preventDefault(),t.ajax({type:"POST",dataType:"JSON",url:"/subscribe/",data:o(n),success:function(e){var o=n.find(".subscribe__errors").html("");e.errors?t.each(e.errors,function(e,i){t("<li/>").text(i).appendTo(o)}):(n.siblings(".subscribe__overlay").removeClass("subscribe__overlay--hide"),setTimeout(function(){var t;t=i.parent().hasClass("row")?i.parent():i,t.slideUp(500,function(){i.remove()})},5e3))}})})}}(jQuery);